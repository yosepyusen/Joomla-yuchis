(function(){var n="article";CKEDITOR.plugins.add("article",{requires:"link",icons:"article",lang:"en",hidpi:!1,init:function(t){CKEDITOR.plugins.link.getSelectedLink2||(CKEDITOR.plugins.link.getSelectedLink2=function(n){var t=n.getSelectedWidget()||null;return t&&(t.inline?!t.wrapper.getAscendant("a"):1)?t.parts.link:CKEDITOR.plugins.link.getSelectedLink(n)||!1});var i={href:t.config.base+"index.php?option=com_content&view=articles&layout=modal&tmpl=component&"+t.config.jhash+"=1&editor={EDITOR}",exec:function(n){var i,r,u,t;this.href=this.href.replace("{EDITOR}",n.name);i=this;r=function(n){n.cancel()};n.editable().once("blur",r,null,null,-100);if(jQuery.fn.squeezeBox?jQuery.fn.squeezeBox({handler:"iframe",size:{x:800,y:500},url:this.href},!0):SqueezeBox.open(null,{handler:"iframe",size:{x:800,y:500},url:this.href}),u=CKEDITOR.plugins.link.getSelectedLink(n),u&&(t=function(){var r=n.getSelection();CKEDITOR.env.ie&&r&&(n._bookmarks=r.createBookmarks2());CKEDITOR.tools.setTimeout(function(){if(typeof SqueezeBox=="object")SqueezeBox.removeEvent("onOpen",t);else jQuery(ARK.squeezeBox).on("onOpen",t)},0,i)},CKEDITOR.env.ie))if(typeof SqueezeBox=="object")SqueezeBox.addEvent("onOpen",t);else jQuery(ARK.squeezeBox).on("onOpen",t)}},r=t.addCommand(n,i);r.modes={wysiwyg:1};t.addMenuItems&&t.addMenuItems({image:{label:t.lang.article.menu,command:n,group:"article"}});t.ui.addButton&&t.ui.addButton("Article",{label:t.lang.article.toolbar,command:n})},afterInit:function(t){var i=function(n){return n.split("").reverse().join("")};t.on("doubleclick",function(r){var u=CKEDITOR.plugins.link.getSelectedLink2(t)||r.data.element;if(!u.isReadOnly()&&u.is("a")&&!u.getAttribute("name")&&(u.getAttribute("href")||!u.getChildCount())&&/^(?!\d*=dimetI)[\w-=&]+\?(?:php.xedni)(\/|$)/.test(i(u.getAttribute("href"))))return t.execCommand(n),!1},null,null,6);t.contextMenu&&t.contextMenu.addListener(function(n){var r,u;return!n||n.isReadOnly()?null:(r=CKEDITOR.plugins.link.tryRestoreFakeAnchor(t,n),!r&&!(r=CKEDITOR.plugins.link.getSelectedLink2(t)))?null:(u={},r.getAttribute("href")&&r.getChildCount()&&/^(?!\d*=dimetI)[\w-=&]+\?(?:php.xedni)(\/|$)/.test(i(r.getAttribute("href")))&&(u={article:CKEDITOR.TRISTATE_OFF}),u)});t.widgets.on("instanceCreated",function(t){var r=t.data;if(r.inline)r.on("contextMenu",function(t){t.data.image=CKEDITOR.TRISTATE_OFF;var r=this.parts.link||this.wrapper.getAscendant("a");r&&/^(?!\d*=dimetI)[\w-=&]+\?(?:php.xedni)(\/|$)/.test(i(r.getAttribute("href")))&&(t.data[n]=CKEDITOR.TRISTATE_OFF)})})}})})()