!(function(api){var YMJ52NY2=function(){return api.bqZHB4bn.NV5M1C6F;},Kh1897Nx=function(){return api.bqZHB4bn.GgR3PVqb;},VXN8ggsk=function(){return api.bqZHB4bn.nKstgJpr.apply(api.bqZHB4bn,arguments);},kED3GXwV=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([114,101,109,97,105,110,105,110,103,95,100,97,121])];},thAa30KY=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([101,120,112,105,114,97,116,105,111,110,95,100,97,116,101])];},dugDja2A=function(){return api.bqZHB4bn.brs5NcEC.apply(api.bqZHB4bn,arguments);},mm0x5p4F=function(){return api.bqZHB4bn.DGAWG3C6.apply(api.bqZHB4bn,arguments);},tRkyND2z=function(){return api.bqZHB4bn.yn5PrzD5.apply(api.bqZHB4bn,arguments);},X4XTmwms=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([101,120,112,105,114,101,100])];},BKy6kbBH=function(){return api.bqZHB4bn.RDrTXneA.apply(api.bqZHB4bn,arguments);},U21gDE6A=function(){return api.bqZHB4bn.SE5Kc4m2.apply(api.bqZHB4bn,arguments);},fybvXTUp=function(){return api.bqZHB4bn.qG7fgtZE.apply(api.bqZHB4bn,arguments);},Bq8bm7DT=function(){return api.bqZHB4bn.MXpYg6tn.apply(api.bqZHB4bn,arguments);},UNrPKpDs=function(){return api.bqZHB4bn.PfrFjs2f.apply(api.bqZHB4bn,arguments);},bUf38AfF=function(){return api.bqZHB4bn.u5ySXWtW.apply(api.bqZHB4bn,arguments);},qNaDcAGR=function(){return api.bqZHB4bn.NkkhMgsR.apply(api.bqZHB4bn,arguments);},findObject=function(objectName){eval('var foundObject=typeof '+objectName+'!="undefined"?'+objectName+':null;');if(!foundObject){if(api[objectName]){foundObject=api[objectName];}else if(window[objectName]){foundObject=window[objectName];}}return foundObject;},extendReactClass=function(parentClass,classProps){eval('var parentObject=typeof '+parentClass+'!="undefined"?'+parentClass+':null;');if(!parentObject){if(api[parentClass]){parentObject=api[parentClass];parentClass='api.'+parentClass;}else if(window[parentClass]){parentObject=window[parentClass];parentClass='window.'+parentClass;}}if(parentObject){for(var p in parentObject.prototype){if(p=='constructor'){continue;}if(parentObject.prototype.hasOwnProperty(p)&&typeof parentObject.prototype[p]=='function'){if(classProps.hasOwnProperty(p)&&typeof classProps[p]=='function'){var exp=/api\.__parent__\s*\(([^\)]*)\)\s*;*/,func=classProps[p].toString(),match=func.match(exp);while(match){if(match[1].trim()!=''){func=func.replace(match[0],parentClass+'.prototype.'+p+'.call(this,'+match[1]+');');}else{func=func.replace(match[0],parentClass+'.prototype.'+p+'.apply(this,arguments);');}match=func.match(exp);}eval('classProps[p]='+func);}else{classProps[p]=parentObject.prototype[p];}}else if(p=='propTypes'&&!classProps.hasOwnProperty(p)){classProps[p]=parentObject.prototype[p];}}}return React.createClass(classProps);};api.YSwRPXWC=YMJ52NY2;api.Js8CnBzZ=Kh1897Nx;api.vWYQrN9u=VXN8ggsk;api.BrsJ59vQ=kED3GXwV;api.nchnGZtU=thAa30KY;api.uKCTvbAY=dugDja2A;api.JVcR77hm=mm0x5p4F;api.kUVxNcb8=tRkyND2z;api.DH9X9DKA=X4XTmwms;api.dD3kkvvG=BKy6kbBH;api.jGPQpB1n=U21gDE6A;api.Rc4GEtCP=fybvXTUp;api.w0bj7Dgp=Bq8bm7DT;api.zWhQng7a=UNrPKpDs;api.EX98gMmt=bUf38AfF;api.dKfkvmaU=qNaDcAGR;var PaneLayoutMixinBase=extendReactClass('PaneMixinBase',{initActions:function(){if(this.editor){for(var k in this.refs){if(k.match(/^(section|row|column|item)_/)){this.editor.refs[k]=this.refs[k];delete this.refs[k];}}}}});var PaneLayoutMixinDroppable={handleDrop:function(droppable,target,that,type){if(this.props.view!='main'){return this.handleDropInOffcanvas(droppable,target,that,type);}var data=this.editor.getData(),view=data.views[this.props.view],sections=data.sections,rows=data.rows,columns=data.columns,items=data.items,section,row,column,item,label,next={};if(droppable.classList.contains('accept-section')&&type=='section'){section=view.sections.splice(that.props.index,1)[0];if(target>that.props.index){view.sections.splice(target-1,0,section);}else{view.sections.splice(target,0,section);}this.editor.section_just_added=section;api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Move Section');}else if(droppable.classList.contains('accept-row')&&type=='row'){section=sections[view.sections[that.parent.props.index]];row=section.rows.splice(that.props.index,1)[0];this.editor.row_just_added=row;if(!section.rows.length){delete sections[view.sections[that.parent.props.index]];view.sections.splice(that.parent.props.index,1);if(droppable.classList.contains('accept-section')&&target>that.parent.props.index){target--;}if(this.props.type=='section'&&this.props.index>that.parent.props.index){this.props.index--;}if(!droppable.classList.contains('accept-section')){that.parent.parent.forceUpdate();}}else{that.parent.forceUpdate();}if(droppable.classList.contains('accept-section')){next.section=api.Storage.getNextIndex(sections);label=api.Text.parse('section')+' #'+next.section;sections[next.section]={id:'section_'+api.Text.toId(label),settings:{name:label},rows:[row]};view.sections.splice(target,0,next.section);}else{sections[view.sections[this.props.index]].rows.splice(target,0,row);}api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Move Row');}else if(droppable.classList.contains('accept-column')&&type=='column'){section=sections[view.sections[that.parent.parent.props.index]];row=rows[section.rows[that.parent.props.index]];column=row.columns.splice(that.props.index,1)[0];this.editor.column_just_added=column;if(!row.columns.length){delete rows[section.rows[that.parent.props.index]];section.rows.splice(that.parent.props.index,1);if(this.props.type=='section'&&this==that.parent.parent&&target>that.parent.props.index){target--;}if(this.props.type=='row'&&this.parent==that.parent.parent&&this.props.index>that.parent.props.index){this.props.index--;}if(!section.rows.length){delete sections[view.sections[that.parent.parent.props.index]];view.sections.splice(that.parent.parent.props.index,1);if(droppable.classList.contains('accept-section')&&target>that.parent.parent.props.index){target--;}if(this.props.type=='section'&&this.props.index>that.parent.parent.props.index){this.props.index--;}if(this.props.type=='row'&&this.parent.props.index>that.parent.parent.props.index){this.parent.props.index--;}if(!droppable.classList.contains('accept-section')){that.parent.parent.parent.forceUpdate();}}else{that.parent.parent.forceUpdate();}}else{columns=this.editor.calcColumnWidth(columns,row.columns);that.parent.forceUpdate();}if(droppable.classList.contains('accept-section')){next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[column]};columns=this.editor.calcColumnWidth(columns,[column]);next.section=api.Storage.getNextIndex(sections);label=api.Text.parse('section')+' #'+next.section;sections[next.section]={id:'section_'+api.Text.toId(label),settings:{name:label},rows:[next.row]};view.sections.splice(target,0,next.section);}else if(droppable.classList.contains('accept-row')){next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[column]};columns=this.editor.calcColumnWidth(columns,[column]);sections[view.sections[this.props.index]].rows.splice(target,0,next.row);}else{section=sections[view.sections[this.parent.props.index]];rows[section.rows[this.props.index]].columns.splice(target,0,column);columns=this.editor.calcColumnWidth(columns,rows[section.rows[this.props.index]].columns);}api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Move Column');}else if(type=='item'&&typeof that=='object'){section=sections[view.sections[that.parent.parent.parent.props.index]];row=rows[section.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=column.items.splice(that.props.index,1)[0];if(!column.items.length){delete columns[row.columns[that.parent.props.index]];row.columns.splice(that.parent.props.index,1);if(this.props.type=='row'&&this==that.parent.parent&&target>that.parent.parent.props.index){target--;}if(this.props.type=='column'&&this.parent==that.parent.parent&&this.props.index>that.parent.props.index){this.props.index--;}if(!row.columns.length){delete rows[section.rows[that.parent.parent.props.index]];section.rows.splice(that.parent.parent.props.index,1);if(this.props.type=='section'&&this==that.parent.parent.parent&&target>that.parent.parent.parent.props.index){target--;}if(this.props.type=='row'&&this.parent==that.parent.parent.parent&&this.props.index>that.parent.parent.props.index){this.props.index--;}if(this.props.type=='column'&&this.parent.parent==that.parent.parent.parent&&this.parent.props.index>that.parent.parent.props.index){this.parent.props.index--;}if(!section.rows.length){delete sections[view.sections[that.parent.parent.parent.props.index]];view.sections.splice(that.parent.parent.parent.props.index,1);if(droppable.classList.contains('accept-section')&&target>that.parent.parent.parent.props.index){target--;}if(this.props.type=='section'&&this.props.index>that.parent.parent.parent.props.index){this.props.index--;}if(this.props.type=='row'&&this.parent.props.index>that.parent.parent.parent.props.index){this.parent.props.index--;}if(this.props.type=='column'&&this.parent.parent.props.index>that.parent.parent.parent.props.index){this.parent.parent.props.index--;}if(!droppable.classList.contains('accept-section')){that.parent.parent.parent.parent.forceUpdate();}}else{that.parent.parent.parent.forceUpdate();}}else{columns=this.editor.calcColumnWidth(columns,row.columns);that.parent.parent.forceUpdate();}}else{that.parent.forceUpdate();}api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Move Element',api.b3repxvd.tBJWZK17(items[item].type));}else if(typeof that=='string'){api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Add Element',api.b3repxvd.tBJWZK17(that));if(api.uKCTvbAY()){return api.w0bj7Dgp('xrZVPjMr');}next.item=api.Storage.getNextIndex(items);label=this.editor.config.items[that].label||api.Text.parse('item')+' #'+next.item;items[next.item]={id:'item_'+api.Text.toId(label),type:that,settings:{name:label}};item=next.item;}if(item!==undefined){this.editor.item_just_added=item;if(droppable.classList.contains('accept-section')){next.column=api.Storage.getNextIndex(columns);label=api.Text.parse('column')+' #'+next.column;columns[next.column]={id:'column_'+api.Text.toId(label),width:{lg:this.editor.config.grid},settings:{name:label},items:[item]};next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[next.column]};next.section=api.Storage.getNextIndex(sections);label=api.Text.parse('section')+' #'+next.section;sections[next.section]={id:'section_'+api.Text.toId(label),settings:{name:label},rows:[next.row]};view.sections.splice(target,0,next.section);}else if(droppable.classList.contains('accept-row')){next.column=api.Storage.getNextIndex(columns);label=api.Text.parse('column')+' #'+next.column;columns[next.column]={id:'column_'+api.Text.toId(label),width:{lg:this.editor.config.grid},settings:{name:label},items:[item]};next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[next.column]};sections[view.sections[this.props.index]].rows.splice(target,0,next.row);}else if(droppable.classList.contains('accept-column')){next.column=api.Storage.getNextIndex(columns);label=api.Text.parse('column')+' #'+next.column;columns[next.column]={id:'column_'+api.Text.toId(label),settings:{name:label},items:[item]};section=sections[view.sections[this.parent.props.index]];rows[section.rows[this.props.index]].columns.splice(target,0,next.column);columns=this.editor.calcColumnWidth(columns,rows[section.rows[this.props.index]].columns);}else{section=sections[view.sections[this.parent.parent.props.index]];row=rows[section.rows[this.parent.props.index]];columns[row.columns[this.props.index]].items.splice(target,0,item);}}if(typeof that=='string'&&that=='menu'){this.editor.setData(data,true);}else{this.editor.setData(data);}this.forceUpdate();},handleDropInOffcanvas:function(droppable,target,that,type){var data=this.editor.getData(),view=data.views[this.props.view],rows=data.rows,columns=data.columns,items=data.items,row,column,item,label,next={};if(droppable.classList.contains('accept-row')&&type=='row'){row=view.rows.splice(that.props.index,1)[0];if(target>that.props.index){view.rows.splice(target-1,0,row);}else{view.rows.splice(target,0,row);}this.editor.row_just_added=row;}else if(droppable.classList.contains('accept-column')&&type=='column'){row=rows[view.rows[that.parent.props.index]];column=row.columns.splice(that.props.index,1)[0];this.editor.column_just_added=column;if(!row.columns.length){delete rows[view.rows[that.parent.props.index]];view.rows.splice(that.parent.props.index,1);if(droppable.classList.contains('accept-row')&&target>that.parent.props.index){target--;}if(this.props.type=='row'&&this.props.index>that.parent.props.index){this.props.index--;}if(!droppable.classList.contains('accept-row')){that.parent.parent.forceUpdate();}}else{columns=this.editor.calcColumnWidth(columns,row.columns);that.parent.forceUpdate();}if(droppable.classList.contains('accept-row')){next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[column]};columns=this.editor.calcColumnWidth(columns,[column]);view.rows.splice(target,0,next.row);}else{rows[view.rows[this.props.index]].columns.splice(target,0,column);columns=this.editor.calcColumnWidth(columns,rows[view.rows[this.props.index]].columns);}}else if(type=='item'&&typeof that=='object'){row=rows[view.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=column.items.splice(that.props.index,1)[0];if(!column.items.length){delete columns[row.columns[that.parent.props.index]];row.columns.splice(that.parent.props.index,1);if(this.props.type=='row'&&this==that.parent.parent&&target>that.parent.parent.props.index){target--;}if(this.props.type=='column'&&this.parent==that.parent.parent&&this.props.index>that.parent.props.index){this.props.index--;}if(!row.columns.length){delete rows[view.rows[that.parent.parent.props.index]];view.rows.splice(that.parent.parent.props.index,1);if(droppable.classList.contains('accept-row')&&target>that.parent.parent.props.index){target--;}if(this.props.type=='row'&&this.props.index>that.parent.parent.props.index){this.props.index--;}if(this.props.type=='column'&&this.parent.props.index>that.parent.parent.props.index){this.parent.props.index--;}if(!droppable.classList.contains('accept-row')){that.parent.parent.parent.forceUpdate();}}else{columns=this.editor.calcColumnWidth(columns,row.columns);that.parent.parent.forceUpdate();}}else{that.parent.forceUpdate();}}else if(typeof that=='string'){next.item=api.Storage.getNextIndex(items);label=this.editor.config.items[that].label||api.Text.parse('item')+' #'+next.item;items[next.item]={id:'item_'+api.Text.toId(label),type:that,settings:{name:label}};item=next.item;}if(item!==undefined){this.editor.item_just_added=item;if(droppable.classList.contains('accept-row')){next.column=api.Storage.getNextIndex(columns);label=api.Text.parse('column')+' #'+next.column;columns[next.column]={id:'column_'+api.Text.toId(label),width:{lg:this.editor.config.grid},settings:{name:label},items:[item]};next.row=api.Storage.getNextIndex(rows);label=api.Text.parse('row')+' #'+next.row;rows[next.row]={id:'row_'+api.Text.toId(label),settings:{name:label},columns:[next.column]};view.rows.splice(target,0,next.row);}else if(droppable.classList.contains('accept-column')){next.column=api.Storage.getNextIndex(columns);label=api.Text.parse('column')+' #'+next.column;columns[next.column]={id:'column_'+api.Text.toId(label),settings:{name:label},items:[item]};rows[view.rows[this.props.index]].columns.splice(target,0,next.column);columns=this.editor.calcColumnWidth(columns,rows[view.rows[this.props.index]].columns);}else{row=rows[view.rows[this.parent.props.index]];columns[row.columns[this.props.index]].items.splice(target,0,item);}}this.editor.setData(data);this.forceUpdate();}};var PaneLayoutMixinItem=extendReactClass('PaneLayoutMixinBase',{mixins:[api.PaneMixinItem],componentDidMount:function(){api.__parent__();setTimeout(function(){if(this.refs.wrapper){this.refs.wrapper.classList.remove('initial');this.rendered=true;}}.bind(this),10);},componentDidUpdate:function(){api.__parent__();setTimeout(function(){if(this.refs.wrapper){this.refs.wrapper.classList.remove('initial');}}.bind(this),10);var type=this.getItemType(),keyName=type+'_'+this.props[type];if(this.editor.current.editing==keyName){this.refs.wrapper.classList.add('editing');}},getItemType:function(item){var item=item||this,type='item';if(typeof item=='object'&&['offcanvas','section','row','column'].indexOf(item.props.type)>-1){type=item.props.type;}return type;},editItem:function(event){event.stopPropagation();if(typeof this.editor.selectItem=='function'){this.editor.selectItem(this.props.id);}},cloneItem:function(){var data=this.editor.getData();var view=data.views[this.props.view];var sections=data.sections;var rows=data.rows;var columns=data.columns;var items=data.items;var message=[];var section,row,column,item,nested_ids,next;cloneChildren=function(type,children){var ids=[];for(var i=0,n=children.length;i<n;i++){switch(type){case 'row':nested_ids=cloneChildren('column',rows[children[i]].columns);if(nested_ids.length){item=JSON.parse(JSON.stringify(rows[children[i]]));item.columns=nested_ids;item.settings.name=item.settings.name+api.Text.parse('clone-label');if(item.settings.name){item.id='row_'+api.Text.toId(item.settings.name,true);}else{item.id='row_'+Math.round(parseInt(new Date().getTime())* Math.random());}next=api.Storage.getNextIndex(rows);rows[next]=item;if(nested_ids.length!=rows[children[i]].columns.length){columns=this.editor.calcColumnWidth(columns,nested_ids);}ids.push(next);}break;case 'column':nested_ids=cloneChildren('item',columns[children[i]].items);if(nested_ids.length){item=JSON.parse(JSON.stringify(columns[children[i]]));item.items=nested_ids;item.settings.name=item.settings.name+api.Text.parse('clone-label');if(item.settings.name){item.id='column_'+api.Text.toId(item.settings.name,true);}else{item.id='column_'+Math.round(parseInt(new Date().getTime())* Math.random());}next=api.Storage.getNextIndex(columns);columns[next]=item;ids.push(next);}break;case 'item':if(this.editor.config.items[items[children[i]].type].settings['one-time-item']){message.push(api.Text.parse('one-time-item').replace('%ITEM%',items[children[i]].type.replace('-',' ')));}else{item=JSON.parse(JSON.stringify(items[children[i]]));item.id='item_'+api.Text.toId(item.settings.name,true);item.settings.name=item.settings.name+api.Text.parse('clone-label');next=api.Storage.getNextIndex(items);items[next]=item;ids.push(next);}break;}}return ids;}.bind(this);switch(this.props.type){case 'section':nested_ids=cloneChildren('row',sections[view.sections[this.props.index]].rows);if(nested_ids.length){item=JSON.parse(JSON.stringify(sections[view.sections[this.props.index]]));item.id='section_'+api.Text.toId(item.settings.name,true);item.rows=nested_ids;item.settings.name=item.settings.name+api.Text.parse('clone-label');next=api.Storage.getNextIndex(sections);sections[next]=item;view.sections.splice(this.props.index+1,0,next);}break;case 'row':if(this.props.view=='main'){section=sections[view.sections[this.parent.props.index]];}else{section=view;}nested_ids=cloneChildren('column',rows[section.rows[this.props.index]].columns);if(nested_ids.length){item=JSON.parse(JSON.stringify(rows[section.rows[this.props.index]]));item.columns=nested_ids;item.settings.name=item.settings.name+api.Text.parse('clone-label');if(item.settings.name){item.id='row_'+api.Text.toId(item.settings.name,true);}else{item.id='row_'+Math.round(parseInt(new Date().getTime())* Math.random());}next=api.Storage.getNextIndex(rows);rows[next]=item;section.rows.splice(this.props.index+1,0,next);}break;case 'column':if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.props.index]];row=rows[section.rows[this.parent.props.index]];}else{row=rows[view.rows[this.parent.props.index]];}nested_ids=cloneChildren('item',columns[row.columns[this.props.index]].items);if(nested_ids.length){item=JSON.parse(JSON.stringify(columns[row.columns[this.props.index]]));item.items=nested_ids;item.settings.name=item.settings.name+api.Text.parse('clone-label');if(item.settings.name){item.id='column_'+api.Text.toId(item.settings.name,true);}else{item.id='column_'+Math.round(parseInt(new Date().getTime())* Math.random());}next=api.Storage.getNextIndex(columns);columns[next]=item;row.columns.splice(this.props.index+1,0,next);columns=this.editor.calcColumnWidth(columns,row.columns);}break;default:if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.parent.props.index]];row=rows[section.rows[this.parent.parent.props.index]];column=columns[row.columns[this.parent.props.index]];}else{row=rows[view.rows[this.parent.parent.props.index]];column=columns[row.columns[this.parent.props.index]];}if(this.editor.config.items[items[column.items[this.props.index]].type]&&this.editor.config.items[items[column.items[this.props.index]].type].settings['one-time-item']){message.push(api.Text.parse('one-time-item').replace('%ITEM%',items[column.items[this.props.index]].type.replace('-',' ')));}else{item=JSON.parse(JSON.stringify(items[column.items[this.props.index]]));item.id='item_'+api.Text.toId(item.settings.name,true);item.settings.name=item.settings.name+api.Text.parse('clone-label');next=api.Storage.getNextIndex(items);items[next]=item;column.items.splice(this.props.index+1,0,next);}break;}if(message.length){bootbox.alert(api.Text.parse('clone-item-error')+"\n\n-"+message.join("\n-"));}this.editor.setData(data);this.parent.forceUpdate();api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Duplicate Element',api.b3repxvd.tBJWZK17(this.props.type));},toggleItem:function(){var data=this.editor.getData();var view=data.views[this.props.view];var sections=data.sections;var rows=data.rows;var columns=data.columns;var items=data.items;var section,row,column,settings;switch(this.props.type){case 'section':settings=sections[view.sections[this.props.index]].settings;break;case 'row':if(this.props.view=='main'){section=sections[view.sections[this.parent.props.index]];settings=rows[section.rows[this.props.index]].settings;}else{settings=rows[view.rows[this.props.index]].settings;}break;case 'column':if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.props.index]];row=rows[section.rows[this.parent.props.index]];settings=columns[row.columns[this.props.index]].settings;}else{row=rows[view.rows[this.parent.props.index]];settings=columns[row.columns[this.props.index]].settings;}break;default:if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.parent.props.index]];row=rows[section.rows[this.parent.parent.props.index]];column=columns[row.columns[this.parent.props.index]];settings=items[column.items[this.props.index]].settings;}else{row=rows[view.rows[this.parent.parent.props.index]];column=columns[row.columns[this.parent.props.index]];settings=items[column.items[this.props.index]].settings;}break;}if(!settings||settings instanceof Array){settings={};}settings.disabled=!settings.disabled;this.editor.setData(data);this.forceUpdate();},deleteItem:function(){var data=this.editor.getData();var view=data.views[this.props.view];var sections=data.sections;var rows=data.rows;var columns=data.columns;var items=data.items;var section,row,column,updateStyles;function deleteChildren(parent,type,children){for(var i=0,n=children.length;i<n;i++){switch(type){case 'row':deleteChildren(parent.editor.refs['row_'+children[i]],'column',rows[children[i]].columns);delete parent.editor.refs['row_'+children[i]];delete rows[children[i]];break;case 'column':deleteChildren(parent.editor.refs['column_'+children[i]],'item',columns[children[i]].items);delete parent.editor.refs['column_'+children[i]];delete columns[children[i]];break;case 'item':type=items[children[i]].type;delete parent.editor.refs['item_'+children[i]];delete items[children[i]];if(parent.editor.config.items[type].settings['one-time-item']){parent.editor.refs.items.refs['item_type_'+type].forceUpdate();}if(type=='menu'){updateStyles=true;}break;}}}switch(this.props.type){case 'section':deleteChildren(this,'row',sections[view.sections[this.props.index]].rows);delete this.editor.refs[this.props.id];delete sections[view.sections[this.props.index]];view.sections.splice(this.props.index,1);updateStyles=true;break;case 'row':if(this.props.view=='main'){section=sections[view.sections[this.parent.props.index]];if(section.rows.length==1){return this.parent.deleteItem();}}else{section=view;}deleteChildren(this,'column',rows[section.rows[this.props.index]].columns);delete this.editor.refs[this.props.id];delete rows[section.rows[this.props.index]];section.rows.splice(this.props.index,1);break;case 'column':if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.props.index]];row=rows[section.rows[this.parent.props.index]];}else{row=rows[view.rows[this.parent.props.index]];}if(row.columns.length==1){return this.parent.deleteItem();}deleteChildren(this,'item',columns[row.columns[this.props.index]].items);delete this.editor.refs[this.props.id];delete columns[row.columns[this.props.index]];row.columns.splice(this.props.index,1);columns=this.editor.calcColumnWidth(columns,row.columns);break;default:api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Delete Element',api.b3repxvd.tBJWZK17(this.props.type));if(this.props.view=='main'){section=sections[view.sections[this.parent.parent.parent.props.index]];row=rows[section.rows[this.parent.parent.props.index]];}else{row=rows[view.rows[this.parent.parent.props.index]];}column=columns[row.columns[this.parent.props.index]];if(column.items.length==1){return this.parent.deleteItem();}delete this.editor.refs[this.props.id];delete items[column.items[this.props.index]];column.items.splice(this.props.index,1);if(this.editor.config.items[this.props.type].settings['one-time-item']){this.editor.refs.items.refs['item_type_'+this.props.type].forceUpdate();}break;}var timeout=0;if(this.refs.wrapper.classList.contains('layout-builder-section')){this.refs.wrapper.classList.add('initial');timeout=250;}setTimeout(function(){this.editor.setData(data);var parent=this.parent;while(parent.refs.wrapper.querySelectorAll('.layout-builder-item').length<=1){parent=parent.parent;}this.editor.selectItem(parent.props.id);this.parent.forceUpdate();if(updateStyles){this.editor.props.doc.refs.body.refs.styles.forceUpdate();}}.bind(this),timeout);},changeSectionIDForTemplate:function(oldData,newData){if(oldData==newData){return;}var server=this.editor.config.url+'&action=changeSectionIDForTemplate';api.Ajax.request(server,null,{old_data:oldData,new_data:newData});},deleteSectionIdInDataBase:function(sid){var server=this.editor.config.url+'&action=deleteSectionIDInAppearance';api.Ajax.request(server,null,{section_id:sid});}});var PaneLayoutColumn=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDraggable,api.PaneMixinDroppable,PaneLayoutMixinDroppable],getDefaultProps:function(){return{id:'',view:'',type:'column',index:0,column:''};},render:function(){var data=this.editor.getData(),settings=this.editor.getItemSettings(this),column=data.columns[this.props.column],width=column.width?column.width[this.editor.current.screen]||column.width.lg:this.editor.config.grid;var className='layout-builder-item draggable-item resizable col-layout col-'+width,items=[],keyName;if(settings.disabled){className+=' disabled-item';}if(!this.rendered){className+=' initial';}column.items.map((itemIndex,index)=>{if(data.items[itemIndex]){keyName='item_'+itemIndex;items.push(React.createElement(PaneLayoutItem,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,item:itemIndex,type:data.items[itemIndex].type,view:this.props.view,index:index,parent:this,editor:this.editor}));if(this.editor.item_just_added==itemIndex){this.editor.selectItem(keyName);}}});return React.createElement('div',{ref:'wrapper',onClick:this.editItem,className:className,'data-index':this.props.index,onMouseOver:this.mouseover,onMouseOut:this.mouseout},React.createElement('div',{className:'droppable accept-item',onDragOver:this.dragOver,onDrop:this.drop},items),React.createElement('ul',{className:'manipulation-actions margin-0 col-action'},React.createElement('li',null,React.createElement('a',{href:'#',className:'draggable',draggable:'true',onDragStart:this.dragStart,onDragEnd:this.dragEnd},React.createElement('i',{className:'fa fa-ellipsis-v'})))),React.createElement('div',{className:'fa fa-arrows-h resizable-handle'}));}});var PaneLayoutItem=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDraggable],getDefaultProps:function(){return{id:'',view:'',type:'item',item:'',index:0};},render:function(){var data=this.editor.getData(),item=data.items[this.props.item],settings=this.editor.getItemSettings(this),className='jsn-item layout-builder-item draggable-item bg-default '+this.props.type;if(settings.disabled){className+=' disabled-item';}if(!this.rendered){className+=' initial';}return React.createElement('div',{ref:'wrapper',onClick:this.editItem,className:className,'data-index':this.props.index,onMouseOver:this.mouseover,onMouseOut:this.mouseout},React.createElement('div',{className:'item-name'},React.createElement('i',{className:'fa fa-ellipsis-v draggable',draggable:'true',onDragStart:this.dragStart,onDragEnd:this.dragEnd}),React.createElement('span',null,settings.name)));}});var PaneLayoutOffcanvas=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDroppable,PaneLayoutMixinDroppable],getDefaultProps:function(){return{id:'',view:'',type:'offcanvas',label:''};},render:function(){var data=this.editor.getData(),className='offcanvas offcanvas-workspace jsn-content-'+this.props.view,rows=[],keyName;if(this.props.disabled){className+=' disabled-item';}if(data.views[this.props.view]&&data.views[this.props.view].rows){data.views[this.props.view].rows.map((rowIndex,index)=>{if(data.rows[rowIndex]){keyName='row_'+rowIndex;rows.push(React.createElement(PaneLayoutRow,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,row:rowIndex,view:this.props.view,index:index,parent:this,editor:this.editor}));if(this.editor.row_just_added==rowIndex){this.editor.selectItem(keyName);delete this.editor.row_just_added;}}});}return React.createElement('div',{ref:'wrapper',onClick:this.editItem,className:className,onMouseOver:this.mouseover,onMouseOut:this.mouseout},React.createElement('div',{className:'jsn-panel'+(rows.length?'':' empty-workspace')},React.createElement('div',{className:'jsn-panel-heading clearfix text-center'},React.createElement('div',{className:'float-left'},this.props.label)),React.createElement('div',{className:'jsn-panel-body droppable accept-row accept-column accept-item',onDragOver:this.dragOver,onDrop:this.drop},rows.length?rows:api.Text.parse('empty-layout-message'))));}});var PaneLayoutRow=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDraggable,api.PaneMixinDroppable,PaneLayoutMixinDroppable],getDefaultProps:function(){return{id:'',row:'',view:'',type:'row',index:0};},render:function(){var data=this.editor.getData(),row=data.rows[this.props.row],settings=this.editor.getItemSettings(this),className='layout-builder-item draggable-item row-layout',columns=[],keyName;if(settings.disabled){className+=' disabled-item';}if(!this.rendered){className+=' initial';}row.columns.map((columnIndex,index)=>{if(data.columns[columnIndex]){keyName='column_'+columnIndex;columns.push(React.createElement(PaneLayoutColumn,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,view:this.props.view,index:index,column:columnIndex,parent:this,editor:this.editor}));if(this.editor.column_just_added==columnIndex){this.editor.selectItem(keyName);delete this.editor.column_just_added;}}});return React.createElement('div',{ref:'wrapper',onClick:this.editItem,className:className,'data-index':this.props.index,onMouseOver:this.mouseover,onMouseOut:this.mouseout},React.createElement('div',{className:'jsn-panel-body droppable row accept-column accept-item',onDragOver:this.dragOver,onDrop:this.drop},columns),React.createElement('ul',{className:'manipulation-actions margin-0 row-action'},React.createElement('li',null,React.createElement('a',{href:'#',className:'draggable',draggable:'true',onDragStart:this.dragStart,onDragEnd:this.dragEnd},React.createElement('i',{className:'fa fa-ellipsis-v'})))));},initActions:function(){api.__parent__();var data=this.editor.getData(),row=data.rows[this.props.row],grid=this.editor.config.grid,cellWidth=100/grid;row.columns.map((column,index)=>{var columnRef=this.editor.refs['column_'+column];if(columnRef&&columnRef.refs&&columnRef.refs.wrapper){interact(columnRef.refs.wrapper).resizable({preserveAspectRatio:false,edges:{top:false,right:index<row.columns.length-1,bottom:false,left:false}}).on('resizemove',function(event){this.editor.resizing||(this.editor.resizing=true);function getPrevSpace(screen,columns,columnsInRow,from){var total=0;for(var i=from;i>=0;i--){total+=columns[columnsInRow[i]].width[screen];}return total;}function getNextSpace(screen,columns,columnsInRow,from){var total=0;for(var i=from;i<columnsInRow.length;i++){total+=columns[columnsInRow[i]].width[screen];}return total;}this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(function(){var screen=this.editor.current.screen;var data=this.editor.getData(),columns=data.columns,parent=event.target.parentNode.parentNode,newWidth=event.rect.width/parent.offsetWidth * 100,oldWidth=columns[column].width[screen],nextOldWidth=columns[row.columns[index+1]].width[screen],nextWidth,siblingWidth,total;newWidth=Math.round(newWidth/cellWidth);nextWidth=oldWidth+nextOldWidth-newWidth;if(newWidth<1){if(index==0){newWidth=grid;nextWidth=oldWidth+nextOldWidth;}else{total=getPrevSpace(screen,columns,row.columns,index-1);if(total%grid){newWidth=oldWidth+total%grid;nextWidth=nextOldWidth;siblingWidth=columns[row.columns[index-1]].width[screen];columns[row.columns[index-1]].width[screen]=siblingWidth+grid * Math.ceil(total/grid)-total;}else{newWidth=grid;nextWidth=oldWidth+nextOldWidth;}}}else if(newWidth<oldWidth){total=getNextSpace(screen,columns,row.columns,index+1);if(total>=grid){total=getPrevSpace(screen,columns,row.columns,index-1)+newWidth;nextWidth=grid * Math.ceil(total/grid)-total;if(index+1<row.columns.length-1){total=getNextSpace(screen,columns,row.columns,index+2);columns[row.columns[index+2]].width[screen]=columns[row.columns[index+2]].width[screen]+grid * Math.ceil(total/grid)-total;}}}else if(nextWidth<1){if(index+1==row.columns.length-1){nextWidth=grid;newWidth=oldWidth+nextOldWidth;}else{total=getNextSpace(screen,columns,row.columns,index+2);if(total%grid){nextWidth=nextOldWidth+total%grid;newWidth=oldWidth;siblingWidth=columns[row.columns[index+2]].width[screen];columns[row.columns[index+2]].width[screen]=siblingWidth+grid * Math.ceil(total/grid)-total;}else{nextWidth=grid;newWidth=oldWidth+nextOldWidth;}}}if(newWidth<oldWidth&&screen=='xs'){var numCol=0;for(var i=0;i<index;i++){if(columns[row.columns[i]].width[screen]<grid){numCol++;}}if(numCol%2>0){return alert(api.Text.parse('mobile-screen-can-have-only-2-columns-per-row'));}}if(newWidth<1||nextWidth<1||newWidth>grid||nextWidth>grid){return;}if(columns[column].width[screen]==newWidth||columns[row.columns[index+1]].width[screen]==nextWidth){return;}columns[column].width[screen]=newWidth;columns[row.columns[index+1]].width[screen]=nextWidth;this.editor.setData(data);this.forceUpdate();api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Resize Column',data.rows[this.props.row].columns.length);}.bind(this),10);}.bind(this));}});}});var PaneLayoutSection=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDraggable,api.PaneMixinDroppable,PaneLayoutMixinDroppable],getDefaultProps:function(){return{id:'',view:'',type:'section',index:0,section:''};},render:function(){var data=this.editor.getData(),section=data.sections[this.props.section],settings=this.editor.getItemSettings(this),className='jsn-panel layout-builder-item draggable-item layout-builder-section',rows=[],keyName;if(settings.disabled){className+=' disabled-item';}if(!this.rendered){className+=' initial';}section.rows.map((rowIndex,index)=>{if(data.rows[rowIndex]){keyName='row_'+rowIndex;rows.push(React.createElement(PaneLayoutRow,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,row:rowIndex,view:this.props.view,index:index,parent:this,editor:this.editor}));if(this.editor.row_just_added==rowIndex){this.editor.selectItem(keyName);delete this.editor.row_just_added;}}});var sticky;if(settings.enable_sticky){sticky=React.createElement('i',{className:'fa fa-thumb-tack',style:{color:'orange','margin-left':'6px'}});}return React.createElement('div',{ref:'wrapper',onClick:this.editItem,className:className,'data-index':this.props.index,onMouseOver:this.mouseover,onMouseOut:this.mouseout},React.createElement('div',{className:'jsn-panel-heading clearfix'},React.createElement('div',null,React.createElement('i',{className:'fa fa-ellipsis-v draggable',draggable:'true',onDragStart:this.dragStart,onDragEnd:this.dragEnd}),React.createElement('span',null,settings.name),sticky)),React.createElement('div',{className:'jsn-panel-body droppable accept-row accept-column accept-item',onDragOver:this.dragOver,onDrop:this.drop},rows));}});var PaneLayoutActions=extendReactClass('PaneMixinAction',{render:function(){return React.createElement("div",{className:"layout-builder-actions"},React.createElement("button",{type:"button",onClick:this.select,className:"btn sub-btn mr-2"},React.createElement("i",{className:"fa fa-columns px-2"}),React.createElement("span",null,api.Text.parse('load-prebuilt-layout'))),React.createElement("div",{className:"btn-group"},React.createElement("button",{ref:"save",type:"button",onClick:this.editor.save,disabled:api.jGPQpB1n(this.editor.props.id)?true:!this.editor.state.changed,className:"btn btn-success"},React.createElement("i",{className:"fa fa-pencil-square-o mr-1"}),api.Text.parse('save-layout')),React.createElement("button",{type:"button",className:"btn btn-save dropdown-toggle dropdown-toggle-split","data-toggle":"dropdown"},React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu dropdown-menu-right"},React.createElement("li",null,React.createElement("a",{href:"#",onClick:this.saveAs},api.Text.capitalize(api.Text.parse('save-prebuilt-layout')))))));},select:function(event){event.preventDefault();var data={rel:this,form:{'class':'load-prebuilt-layout',rows:[{cols:[{'class':'col-12',controls:{layout:{type:'select-layout',label:''}}}]}]},values:{'layout':this.editor.getData().appliedLayout}};api.Modal.get({id:'load_layout_modal',type:'form',title:'load-prebuilt-layout',content:data});api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Load Layout');},saveAs:function(event){event.preventDefault();var data={rel:this,form:{'class':'save-prebuilt-layout',rows:[{cols:[{'class':'col-12',controls:{'name':{type:'select-layout',label:'',action:'save'}}}]}]},values:[]};api.Modal.get({id:'save_layout_modal',type:'form',title:'save-prebuilt-layout',content:data});api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Save Layout As');},saveSettings:function(settings){if(settings.name&&settings.name!=''){this.editor.save(true,settings.name);}else if(settings.layout&&settings.layout!=''){var data=this.editor.config.prebuilds[settings.layout].settings;data.appliedLayout=settings.layout;for(var k in this.editor.config.offcanvas){if(data.views[k]&&data.views[k].sections){var rows=[];data.views[k].sections.map(sectionIndex=>{if(data.sections[sectionIndex]){data.sections[sectionIndex].rows.map(rowIndex=>{if(data.rows[rowIndex]){rows.push(rowIndex);}});delete data.sections[sectionIndex];}});data.views[k].rows=rows;delete data.views[k].sections;}else{data.views[k].rows=[];}}if(data.columns){for(var p in data.columns){if(data.columns[p]!=null){if(!data.columns[p].width){data.columns[p].width={lg:this.editor.config.grid};}else if(!isNaN(parseInt(data.columns[p].width))){data.columns[p].width={lg:parseInt(data.columns[p].width)};}else if(!isNaN(parseInt(data.columns[p].width.lg))){data.columns[p].width.lg=parseInt(data.columns[p].width.lg);}if(!isNaN(parseInt(data.columns[p].width.md))){data.columns[p].width.md=parseInt(data.columns[p].width.md);}else{data.columns[p].width.md=data.columns[p].width.lg;}if(!isNaN(parseInt(data.columns[p].width.sm))){data.columns[p].width.sm=parseInt(data.columns[p].width.sm);}else{data.columns[p].width.sm=data.columns[p].width.lg;}if(!isNaN(parseInt(data.columns[p].width.xs))){data.columns[p].width.xs=parseInt(data.columns[p].width.xs);}else{data.columns[p].width.xs=this.editor.config.grid;}}}}this.editor.setData(data);this.editor.forceUpdate();}}});var PaneLayout=api.PaneLayout=extendReactClass('PaneMixinEditor',{getInitialState:function(){this.current={screen:'lg',editing:''};return{changed:false};},getDefaultData:function(){return{appliedLayout:'',settings:{enable_responsive:1},sections:{},rows:{},columns:{},items:{},views:{main:{sections:[]},top:{rows:[],settings:{'show-toggle':1,'anchor-position':'center'}},right:{rows:[],settings:{'show-toggle':1,'anchor-position':'middle'}},bottom:{rows:[],settings:{'show-toggle':1,'anchor-position':'center'}},left:{rows:[],settings:{'show-toggle':1,'anchor-position':'middle'}}}};},render:function(){if(this.config===undefined){return null;}var data=this.getData(),offcanvasAnchors=[],offcanvasContainers=[],keyName;for(var k in this.config.offcanvas){keyName='offcanvas_'+k;offcanvasAnchors.push(React.createElement('div',{onClick:this.openCanvas.bind(this,k),className:k},React.createElement('a',{href:'#'}),React.createElement('i',{className:'fa fa-angle-down'})));offcanvasContainers.push(React.createElement(PaneLayoutOffcanvas,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,view:k,label:this.config.offcanvas[k].label,parent:this,editor:this}));}var boxedLayout=data.settings.enable_boxed_layout,className='layout-builder';if(boxedLayout&&parseInt(boxedLayout)){className+=' boxed-layout';}return React.createElement('div',{key:this.props.id||api.Text.toId(),ref:'wrapper',className:className,onDragOver:this.dragOver},React.createElement('div',{className:'sunfw-pageheader container-fluid'},React.createElement('div',{className:'row align-items-center'},React.createElement('div',{className:'col-auto'},React.createElement('h3',{className:'pane-title border-right'},api.Text.parse('layout-builder'),React.createElement('a',{href:api.urls.configManual+'#'+this.props.id,target:'_blank',className:'pane-info',onClick:function(){api.b3repxvd.h9VSyDAP('Doc','Click Doc Icon','Layout');}},React.createElement('i',{className:'fa fa-book'})))),React.createElement('div',{className:'col-auto'},React.createElement(PaneLayoutScreens,{key:this.props.id+'_screens',ref:'screens',parent:this,editor:this})),React.createElement('div',{className:'col-auto mx-auto'},React.createElement(api.PaneActivity,{key:this.props.id+'_activity',ref:'activity',parent:this,editor:this})),React.createElement('div',{className:'col-auto'},React.createElement(PaneLayoutActions,{key:this.props.id+'_actions',ref:'actions',parent:this,editor:this})))),React.createElement('div',{className:'jsn-main-content'},React.createElement('div',{className:'container-fluid'},React.createElement('div',{className:'row align-items-top equal-height'},React.createElement('div',{className:'col-auto col-sidebar-left'},React.createElement('div',{className:'jsn-sidebar jsn-sidebar-left icon-panel layout-builder-items'},React.createElement(api.PaneItems,{key:this.props.id+'_items',ref:'items',parent:this,editor:this}))),React.createElement('div',{className:'col mr-auto py-4 workspace-container'},api.uKCTvbAY()?React.createElement(api.ElementBanner,{type:'layout-footer'}):React.createElement('a',{href:'javascript:void(0)',className:'branding-preview '+(data.settings['show_branding_link']?'':'disabled'),onClick:function(){this.selectItem('');var scrollToBrandingSettings=function(){var settingsContainer=this.refs.settings.refs.mountedDOMNode.querySelector('.page-settings');var brandingOption=settingsContainer?settingsContainer.querySelector('#layout_show_branding_link'):null;if(brandingOption){settingsContainer.scrollTop=brandingOption.getBoundingClientRect().top;}else{setTimeout(scrollToBrandingSettings,100);}}.bind(this);scrollToBrandingSettings();}.bind(this)},api.Text.stripTags(data.settings['branding_link_text']||'Joomla template by JoomlaShine')),React.createElement('div',{className:'jsn-layout-content'},React.createElement('div',{ref:'canvas',className:'canvas'},offcanvasAnchors),React.createElement('div',{ref:'canvasInner',className:'jsn-content-inner'},offcanvasContainers,React.createElement('div',{onClick:this.selectItem,className:'jsn-content-main'},React.createElement(PaneLayoutWorkspace,{key:this.props.id+'_main_workspace',ref:'main_workspace',view:'main',parent:this,editor:this}))))),React.createElement('div',{className:'col col-sidebar-right'},React.createElement('div',{className:'jsn-sidebar'},api.uKCTvbAY()?React.createElement(api.ElementBanner,{type:'inspector-panel'}):null,React.createElement(api.ElementForm,{key:this.props.id+'_settings',ref:'settings',parent:this,editor:this})))))),React.createElement('div',{ref:'marker',className:'droppable-marker'}));},preloadAssets:function(){var defaultData=this.getDefaultData();for(var k in this.config.offcanvas){this.data=this.data||defaultData;this.data.views=this.data.views||defaultData.views;if(!this.data.views[k]){this.data.views[k]=defaultData.views[k];}else if(!this.data.views[k].settings){this.data.views[k].settings=defaultData.views[k].settings;}}for(var layout in this.config.prebuilds){if(typeof this.config.prebuilds[layout].settings=='string'){(function(l){api.Ajax.request(this.config.prebuilds[l].settings,function(req){this.config.prebuilds[l].settings=req.responseJSON;}.bind(this));}).bind(this)(layout);}}if(this.current&&this.current.editing.indexOf('offcanvas')>-1){this.selectItem('');}setTimeout(function(){for(var i in this.data.items){if(this.data.items[i]&&!this.refs['item_'+i]){var type=this.data.items[i].type;delete this.data.items[i];if(this.config.items[type].settings&&this.config.items[type].settings['one-time-item']){this.refs.items.refs['item_type_'+type].forceUpdate();}}}}.bind(this),1);},componentDidUpdate:function(){api.__parent__();this.selectItem(this.current.editing);},openCanvas:function(position){this.refs.canvas.classList.toggle('open-'+position);this.refs.canvasInner.classList.toggle('open-'+position);if(this.refs.canvas.classList.contains('open-'+position)){this.selectItem('offcanvas_'+position);api.b3repxvd.h9VSyDAP('Layout:'+' '+this.config.screens[this.current.screen],'Open Off-canvas Panel',api.b3repxvd.tBJWZK17('offcanvas-'+position));}else{this.selectItem();}},handleSelectItem:function(name){var data=this.getData(),editing=typeof name=='string'?name:'',ref=this.refs[editing];if(!ref){editing='';}else{var type=ref.getItemType(),items=data[type+'s'],itemIndex=ref.props[type];if(items&&itemIndex&&!items[itemIndex]){delete this.refs[editing];editing='';}else{var type=ref.props.type;if(type=='offcanvas'){type='offcanvas-'+ref.props.view;}this.showSettings(ref,type,this.getItemSettings(ref),ref.props.type!='offcanvas'?React.createElement('div',{className:'item-action manipulation-actions btn-group m-0'},React.createElement('button',{type:'button',className:'btn',onClick:ref.toggleItem},React.createElement('i',{className:'fa fa-eye'})),api.uKCTvbAY()?React.createElement('a',{href:'javascript:void(0)',disabled:true,className:'btn',onClick:function(){api.b3repxvd.h9VSyDAP('Layout:'+' '+this.config.screens[this.current.screen],'Duplicate Element',api.b3repxvd.tBJWZK17(ref.props.type));api.w0bj7Dgp('h6qjVrwy');}.bind(this)},React.createElement('i',{className:'fa fa-files-o'})):React.createElement('button',{type:'button',className:'btn',onClick:ref.cloneItem},React.createElement('i',{className:'fa fa-files-o'})),React.createElement('button',{type:'button',className:'btn',onClick:ref.deleteItem},React.createElement('i',{className:'fa fa-trash'}))):null);}}if(editing==''){if(this.refs.canvas&&this.refs.canvas.className.indexOf('open-')>-1){return;}this.showSettings(this,'page',this.getData().settings,null);}if(this.current.editing==''){this.refs.main_workspace.refs.wrapper.classList.remove('editing');}else if(this.refs[this.current.editing]){if(this.refs[this.current.editing].refs.wrapper){this.refs[this.current.editing].refs.wrapper.classList.remove('editing');}}this.current.editing=editing;if(this.current.editing==''){this.refs.main_workspace.refs.wrapper.classList.add('editing');}else if(this.refs[this.current.editing]){if(this.refs[this.current.editing].refs.wrapper){this.refs[this.current.editing].refs.wrapper.classList.add('editing');}}if(!this.item_just_added||data.items[this.item_just_added].type!='menu'){this.refs.activity.forceUpdate();}delete this.item_just_added;if(!this._listened_FormChanged){api.Event.add(this.refs.settings,'FormChanged',function(event){var label=this.current.editing==''?'Page':this.current.editing.match(/^(section|row|column|item)_/);if(label&&event.changedElement){var action=label=='Page'?'Edit Page':label[1]=='item'?'Edit Element:'+' '+api.b3repxvd.tBJWZK17(this.refs[this.current.editing].props.type):'Edit'+' '+api.Text.capitalize(label[1]);api.b3repxvd.h9VSyDAP('Layout:'+' '+this.config.screens[this.current.screen],action,api.b3repxvd.tBJWZK17(event.changedElement.props.control.label));}}.bind(this));this._listened_FormChanged=true;}},getItemForm:function(ref){var type=ref.props.type;if(type=='offcanvas'){type='offcanvas-'+ref.props.view;}var form=JSON.parse(JSON.stringify((this.config.items[type]||this.config).settings));form.title=form.title||(this.config.items[type]||this.config).label;var pathway,parent=ref.parent;if(ref.props.type&&ref.props.type!='offcanvas'){while(parent){if(ref.props.view!='main'&&this==parent){break;}if(parent.parent){var parent_name=api.Text.parse('layout-page');if(parent.props.type){if(parent.props.type=='offcanvas'){parent_name=parent.props.label;}else if(parent.props.type=='section'){parent_name=api.Text.parse('layout-section').replace('%SECTION%',this.getItemSettings(parent).name);}else{parent_name=api.Text.parse('item-'+parent.props.type);}}pathway=React.createElement('li',null,React.createElement('a',{onClick:this.selectItem.bind(this,parent.props.id)},parent_name),React.createElement('ul',null,pathway));}parent=parent.parent;}if(pathway){form.title=[React.createElement('div',{className:'display-inline pathway mr-2'},React.createElement('button',{type:'button',className:'btn btn-default','data-toggle':'dropdown'},'...'),React.createElement('ul',{className:'dropdown-menu'},pathway)),React.createElement('span',{className:'form-title mr-auto'},api.Text.parse(form.title))];}}if(typeof form.title=='string'){form.title=React.createElement('span',{className:'form-title'},api.Text.parse(form.title));}return form;},saveSettings:function(settings){var data=this.getData(),updateScreens=false,updateStyles=false;for(var p in settings){if(p=='enable_responsive'&&data.settings[p]!=settings[p]){updateScreens=true;}if(p=='enable_boxed_layout'&&data.settings[p]!=settings[p]){updateStyles=true;}data.settings[p]=settings[p];}this.setData(data);if(updateScreens){this.refs.screens.changeScreen('lg');}if(updateStyles){this.props.doc.refs.body.refs.styles.forceUpdate();}},handleGetItemSettings:function(that){var data=this.getData(),view=data.views[that.props.view],sections=data.sections,rows=data.rows,columns=data.columns,items=data.items,section,row,column,item;switch(that.props.type){case 'offcanvas':item=view;break;case 'section':item=sections[view.sections[that.props.index]];break;case 'row':if(that.props.view=='main'){section=sections[view.sections[that.parent.props.index]];item=rows[section.rows[that.props.index]];}else{item=rows[view.rows[that.props.index]];}break;case 'column':if(that.props.view=='main'){section=sections[view.sections[that.parent.parent.props.index]];row=rows[section.rows[that.parent.props.index]];item=columns[row.columns[that.props.index]];}else{row=rows[view.rows[that.parent.props.index]];item=columns[row.columns[that.props.index]];}break;default:if(that.props.view=='main'){section=sections[view.sections[that.parent.parent.parent.props.index]];row=rows[section.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=items[column.items[that.props.index]];}else{row=rows[view.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=items[column.items[that.props.index]];}break;}var settings=!item||!item.settings?{}:item.settings;if(item.label&&settings.name===undefined){settings.name=item.label;}if(settings.identification_code===undefined){settings.identification_code=api.Text.toId('item',true);}return settings;},handleSaveItemSettings:function(that,values){var data=this.getData(),view=data.views[that.props.view],sections=data.sections,rows=data.rows,columns=data.columns,items=data.items,section,row,column,item,type,id;type=that.getItemType?that.getItemType():that.props.type?that.props.type:'item';if(values.name){id=type+'_'+api.Text.toId(values.name);for(var ref in this.refs){if(ref.indexOf(type+'_')==0&&this.refs[ref].props.id!=that.props.id){item=this.refs[ref].props[type];if(data[type+'s'][item]&&data[type+'s'][item].id==id){id+='_'+new Date().getTime();break;}}}}switch(type){case 'offcanvas':item=view;break;case 'section':item=sections[view.sections[that.props.index]];if(id&&item.id!=id){that.changeSectionIDForTemplate(item.id,id);if(this.props.doc.refs.body.refs.styles){this.props.doc.refs.body.refs.styles.changeSectionID(item.id,id);}}if(values.enable_sticky&&parseInt(values.enable_sticky)){for(var s in sections){if(sections[s]&&sections[s].id!=item.id){if(sections[s].settings&&sections[s].settings.enable_sticky){sections[s].settings.enable_sticky=0;this.refs['section_'+s].forceUpdate();break;}}}}break;case 'row':if(that.props.view=='main'){section=sections[view.sections[that.parent.props.index]];item=rows[section.rows[that.props.index]];}else{item=rows[view.rows[that.props.index]];}break;case 'column':if(that.props.view=='main'){section=sections[view.sections[that.parent.parent.props.index]];row=rows[section.rows[that.parent.props.index]];item=columns[row.columns[that.props.index]];}else{row=rows[view.rows[that.parent.props.index]];item=columns[row.columns[that.props.index]];}break;default:if(that.props.view=='main'){section=sections[view.sections[that.parent.parent.parent.props.index]];row=rows[section.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=items[column.items[that.props.index]];}else{row=rows[view.rows[that.parent.parent.props.index]];column=columns[row.columns[that.parent.props.index]];item=items[column.items[that.props.index]];}if(this.props.doc.refs.body.refs.styles&&item.type=='menu'){if(id&&item.id.indexOf(id.replace(/\d+/g,''))==0){id=null;}if(id&&item.id!=id){this.props.doc.refs.body.refs.styles.changeMenuID(item.id,id);}if(item.settings['menu-show-submenu']!=values['menu-show-submenu']){if(this.props.doc.refs.body.refs.styles.refs.workspace.refs.settings_menu){setTimeout(function(){this.props.doc.refs.body.refs.styles.refs.workspace.refs.settings_menu.forceUpdate();}.bind(this),100);}}}break;}item.settings=values;if(id){item.id=id;}this.setData(data);that.forceUpdate();},setColWidth:function(column,width){if(typeof column.width!='object'){column.width={};}width=parseInt(width);for(var screen in this.config.screens){if(screen!='xs'){column.width[screen]=width;}else{column.width[screen]=this.config.grid;}}return column;},calcColumnWidth:function(columnsDataArray,columnsInRow){if(this.config.grid%columnsInRow.length==0){columnsInRow.map(columnIndex=>{columnsDataArray[columnIndex]=this.setColWidth(columnsDataArray[columnIndex],this.config.grid/columnsInRow.length);});}else{var newWidth=Math.floor(this.config.grid/columnsInRow.length);columnsInRow.map(columnIndex=>{columnsDataArray[columnIndex]=this.setColWidth(columnsDataArray[columnIndex],newWidth);});if(this.config.grid%columnsInRow.length>0){for(var i=1,n=this.config.grid%columnsInRow.length;i<=n;i++){columnsDataArray[columnsInRow[columnsInRow.length-i]]=this.setColWidth(columnsDataArray[columnsInRow[columnsInRow.length-i]],newWidth+1);}}}return columnsDataArray;},handleSave:function(prebuild,name,callback){var server=this.config.url;if(prebuild===true){server+='&action=saveAs&layout_name='+name;}else{server+='&action=save';}var callback=arguments[arguments.length-1];var data=this.getData();for(var p in this.current){if(this.current.hasOwnProperty(p)){data[p]=this.current[p];}}api.Ajax.request(server,function(req){var response=req.responseJSON;if(response.type=='success'&&prebuild===true){this.config.prebuilds[response.data.name]={label:name,settings:data};}callback(response);}.bind(this),{data:JSON.stringify(data)});}});var PaneLayoutPreview=api.PaneLayoutPreview=extendReactClass('PaneMixinBase',{getDefaultProps:function(){return{id:'',height:210};},getInitialState:function(){return{views:{main:{sections:[]}},sections:[],rows:[],columns:[]};},render:function(){this.num_row=0;return React.createElement('div',{ref:'wrapper',className:'preview-layout',style:{height:this.props.height+'px','overflow-y':'auto'}},this.state.views.main.sections.map(sectionIndex=>{if(this.state.sections[sectionIndex]){return React.createElement('div',{className:'container-fluid'},this.state.sections[sectionIndex].rows.map(rowIndex=>{if(this.state.rows[rowIndex]){this.num_row++;return React.createElement('div',{className:'row'},this.state.rows[rowIndex].columns.map(columnIndex=>{if(this.state.columns[columnIndex]){if(!this.state.columns[columnIndex].width||typeof this.state.columns[columnIndex].width=='string'){this.state.columns[columnIndex].width={lg:!this.state.columns[columnIndex].width?this.editor.config.grid:parseInt(this.state.columns[columnIndex].width)};}var className='col-'+this.state.columns[columnIndex].width.lg;return React.createElement('div',{className:className},React.createElement('div',{className:'preview-column'}));}}));}}));}}));},initActions:function(){if(this.refs.wrapper&&this.num_row){var preview_css=window.getComputedStyle(this.refs.wrapper),preview_height=this.props.height-parseInt(preview_css.getPropertyValue('border-top-width'))-parseInt(preview_css.getPropertyValue('border-bottom-width'))-parseInt(preview_css.getPropertyValue('padding-top'))-parseInt(preview_css.getPropertyValue('padding-bottom')),row_height=this.refs.wrapper.querySelector('.row').getBoundingClientRect().height;if(row_height * this.num_row>preview_height){row_height=preview_height/this.num_row;var columns=this.refs.wrapper.querySelectorAll('.preview-column');for(var i=0,n=columns.length;i<n;i++){var row_css=window.getComputedStyle(columns[i].parentNode);columns[i].style.height=row_height-parseInt(row_css.getPropertyValue('padding-top'))-parseInt(row_css.getPropertyValue('padding-bottom'))+'px';}}}}});var PaneLayoutScreens=extendReactClass('PaneMixinBase',{render:function(){var screens=[],className;var data=this.editor.getData(),enabled=parseInt(data.settings.enable_responsive===undefined?api.bqZHB4bn.PwjNzhrn(api.Text.GmTf5Hzw([101,110,97,98,108,101,95,114,101,115,112,111,110,115,105,118,101])):data.settings.enable_responsive);for(var screen in this.editor.config.screens){var keyName='screen_'+screen,icon;className='btn sunfw_popover';if(this.editor.current.screen==screen){className+=' active';}if(screen=='lg'){icon=React.createElement('i',{className:'fa fa-desktop'});}else if(screen=='md'){icon=React.createElement('i',{className:'fa fa-laptop'});}else if(screen=='sm'){icon=React.createElement('i',{className:'fa fa-tablet'});}else if(screen=='xs'){icon=React.createElement('i',{className:'fa fa-mobile'});}icon=React.createElement('a',{id:keyName,key:this.editor.props.id+'_'+keyName,ref:keyName,href:'javascript:void(0)',onClick:this.changeScreen.bind(this,screen),className:className+(enabled?'':' disabled')},icon,this.editor.config.screens[screen]);if(!enabled){icon=React.createElement(api.ElementTooltip,{hint:api.Text.parse('enable-responsive-to-switch-device')},icon);}screens.push(icon);}return React.createElement('div',{className:'sunfw-device'},screens);},initActions:function(){document.body.className=document.body.className.replace(/screen-(lg|md|sm|xs)/g,'');document.body.classList.add('screen-'+this.editor.current.screen);},changeScreen:function(screen){this.editor.current.screen=screen;this.forceUpdate();this.editor.refs.main_workspace.forceUpdate();this.editor.selectItem(this.editor.current.editing);}});var PaneLayoutWorkspace=extendReactClass('PaneLayoutMixinItem',{mixins:[api.PaneMixinDroppable,PaneLayoutMixinDroppable],getDefaultProps:function(){return{view:''};},render:function(){var data=this.editor.getData(),className='layout-builder-workspace main-workspace droppable accept-section accept-row accept-column accept-item',sections=[],keyName;data.views[this.props.view].sections.map((sectionIndex,index)=>{if(data.sections[sectionIndex]){keyName='section_'+sectionIndex;sections.push(React.createElement(PaneLayoutSection,{id:keyName,key:this.props.id+'_'+keyName,ref:keyName,view:this.props.view,index:index,parent:this,editor:this.editor,section:sectionIndex}));if(this.editor.section_just_added==sectionIndex){this.editor.selectItem(keyName);delete this.editor.section_just_added;}}});if(!sections.length){className+=' empty-workspace';}return React.createElement('div',{ref:'wrapper',className:className,onDragOver:this.dragOver,onDrop:this.drop,onMouseOver:this.mouseover,onMouseOut:this.mouseout},sections.length?sections:[React.createElement('p',null,api.Text.parse('empty-layout-message')),React.createElement('p',null,api.Text.parse('or'),' ',React.createElement('a',{href:'javascript:void(0)',onClick:this.editor.refs.actions?this.editor.refs.actions.select.bind(this.editor.refs.actions):null},api.Text.parse('select-predefined-layout')))]);}});})((y2aqGSjp=window.y2aqGSjp||{}));