var InputMenuItem=api.InputMenuItem=extendReactClass('MixinInput',{getDefaultProps:function(){return{getItemList:api.urls.ajaxBase+'&action=getMenuItems'};},getInitialState:function(){return{value:this.props.value,options:{},language:'*'};},componentWillMount:function(){api.__parent__();this.loading=true;api.Ajax.request(this.props.getItemList,function(req){var response=req.responseJSON;this.loading=false;if(response.type=='success'){this.setState({options:response.data});}}.bind(this));},render:function(){var options=[],selected,language_filter=document.querySelector('.language-filter');if(language_filter){this.state.language=language_filter.options[language_filter.selectedIndex].value;if(!this._listened_changeEventOnLanguageFilter){jQuery(language_filter).on('change',function(event){this.setState({language:event.target.options[event.target.selectedIndex].value});}.bind(this));this._listened_changeEventOnLanguageFilter=true;}}options.push(React.createElement('option',{value:''},api.Text.parse(this.loading?'loading':'select-menu-item')));for(var menu_type in this.state.options){if(this.state.language!='*'&&this.state.options[menu_type].language!=this.state.language){continue;}options.push(React.createElement('optgroup',{label:this.state.options[menu_type].text},this.state.options[menu_type].items.map(option=>{selected=this.state.value==option.id?true:false;return React.createElement('option',{value:option.id,selected:selected},(option.level>1?'-'.repeat(option.level):'')+option.title);})));}return React.createElement('div',{key:this.props.id||api.Text.toId(),className:'form-group '+(this.props.control.className?this.props.control.className:'')},React.createElement('label',null,this.label,this.tooltip),React.createElement('select',{ref:'field',name:this.props.setting,onChange:this.change,className:'form-control'},options));},initActions:function(){api.__parent__();if(this.refs.field&&!this._initialized_chosen){this.initChosen({disable_search:false,display_disabled_options:false},true);this._initialized_chosen=true;}}});