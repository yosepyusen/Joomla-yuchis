!(function(api){var YMJ52NY2=function(){return api.bqZHB4bn.NV5M1C6F;},Kh1897Nx=function(){return api.bqZHB4bn.GgR3PVqb;},VXN8ggsk=function(){return api.bqZHB4bn.nKstgJpr.apply(api.bqZHB4bn,arguments);},kED3GXwV=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([114,101,109,97,105,110,105,110,103,95,100,97,121])];},thAa30KY=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([101,120,112,105,114,97,116,105,111,110,95,100,97,116,101])];},dugDja2A=function(){return api.bqZHB4bn.brs5NcEC.apply(api.bqZHB4bn,arguments);},mm0x5p4F=function(){return api.bqZHB4bn.DGAWG3C6.apply(api.bqZHB4bn,arguments);},tRkyND2z=function(){return api.bqZHB4bn.yn5PrzD5.apply(api.bqZHB4bn,arguments);},X4XTmwms=function(){return Kh1897Nx()[api.Text.GmTf5Hzw([101,120,112,105,114,101,100])];},BKy6kbBH=function(){return api.bqZHB4bn.RDrTXneA.apply(api.bqZHB4bn,arguments);},U21gDE6A=function(){return api.bqZHB4bn.SE5Kc4m2.apply(api.bqZHB4bn,arguments);},fybvXTUp=function(){return api.bqZHB4bn.qG7fgtZE.apply(api.bqZHB4bn,arguments);},Bq8bm7DT=function(){return api.bqZHB4bn.MXpYg6tn.apply(api.bqZHB4bn,arguments);},UNrPKpDs=function(){return api.bqZHB4bn.PfrFjs2f.apply(api.bqZHB4bn,arguments);},bUf38AfF=function(){return api.bqZHB4bn.u5ySXWtW.apply(api.bqZHB4bn,arguments);},qNaDcAGR=function(){return api.bqZHB4bn.NkkhMgsR.apply(api.bqZHB4bn,arguments);},findObject=function(objectName){eval('var foundObject=typeof '+objectName+'!="undefined"?'+objectName+':null;');if(!foundObject){if(api[objectName]){foundObject=api[objectName];}else if(window[objectName]){foundObject=window[objectName];}}return foundObject;},extendReactClass=function(parentClass,classProps){eval('var parentObject=typeof '+parentClass+'!="undefined"?'+parentClass+':null;');if(!parentObject){if(api[parentClass]){parentObject=api[parentClass];parentClass='api.'+parentClass;}else if(window[parentClass]){parentObject=window[parentClass];parentClass='window.'+parentClass;}}if(parentObject){for(var p in parentObject.prototype){if(p=='constructor'){continue;}if(parentObject.prototype.hasOwnProperty(p)&&typeof parentObject.prototype[p]=='function'){if(classProps.hasOwnProperty(p)&&typeof classProps[p]=='function'){var exp=/api\.__parent__\s*\(([^\)]*)\)\s*;*/,func=classProps[p].toString(),match=func.match(exp);while(match){if(match[1].trim()!=''){func=func.replace(match[0],parentClass+'.prototype.'+p+'.call(this,'+match[1]+');');}else{func=func.replace(match[0],parentClass+'.prototype.'+p+'.apply(this,arguments);');}match=func.match(exp);}eval('classProps[p]='+func);}else{classProps[p]=parentObject.prototype[p];}}else if(p=='propTypes'&&!classProps.hasOwnProperty(p)){classProps[p]=parentObject.prototype[p];}}}return React.createClass(classProps);};api.YSwRPXWC=YMJ52NY2;api.Js8CnBzZ=Kh1897Nx;api.vWYQrN9u=VXN8ggsk;api.BrsJ59vQ=kED3GXwV;api.nchnGZtU=thAa30KY;api.uKCTvbAY=dugDja2A;api.JVcR77hm=mm0x5p4F;api.kUVxNcb8=tRkyND2z;api.DH9X9DKA=X4XTmwms;api.dD3kkvvG=BKy6kbBH;api.jGPQpB1n=U21gDE6A;api.Rc4GEtCP=fybvXTUp;api.w0bj7Dgp=Bq8bm7DT;api.zWhQng7a=UNrPKpDs;api.EX98gMmt=bUf38AfF;api.dKfkvmaU=qNaDcAGR;var MixinBase=api.MixinBase=React.createClass({displayName:'MixinBase',propTypes:{id:React.PropTypes.string,url:React.PropTypes.string,cfg:React.PropTypes.object},initConfig:function(config){if(config.textMapping){api.Text.setData(this,config.textMapping);delete config.textMapping;}this.setState(config);},componentWillMount:function(){if(this.props.cfg){this.initConfig(this.props.cfg);}else if(this.props.url&&this.props.url!=''){api.Ajax.request(this.props.url,function(req){if(req.responseJSON){this.initConfig(req.responseJSON.data);}}.bind(this));}},render:function(){return null;},componentDidMount:function(){this.initActions();},componentDidUpdate:function(oldProps,oldState){this.initActions();},initActions:function(){if(this.props&&this.props.id&&this.props.id!=''){var mountedNode=this.refs.mountedDOMNode||ReactDOM.findDOMNode(this);if(mountedNode&&(!mountedNode.id||mountedNode.id!=this.props.id)){mountedNode.id=this.props.id;}}}});var MixinInput=api.MixinInput=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,form:React.PropTypes.element,value:React.PropTypes.oneOfType([React.PropTypes.bool,React.PropTypes.array,React.PropTypes.object,React.PropTypes.number,React.PropTypes.string]),setting:React.PropTypes.string,control:React.PropTypes.object},getDefaultProps:function(){return{id:'',form:null,value:'',setting:'',control:{}};},getInitialState:function(){return{value:this.props.value};},componentWillReceiveProps:function(newProps){if(this.props.value!=newProps.value){this.setState({value:newProps.value});}},componentWillMount:function(){this.prepareControl();},componentWillUpdate:function(){this.prepareControl();},prepareControl:function(){this.label='';this.description='';if(this.props.control.label&&this.props.control.label!=''){this.label=api.Text.parse(this.props.control.label);}if(this.props.control.description&&this.props.control.description!=''){this.description=api.Text.parse(this.props.control.description);}this.tooltip='';if(this.props.control.hint&&this.props.control.hint!=''){this.tooltip=React.createElement(ElementTooltip,{hint:api.Text.parse(this.props.control.hint,true)});}},initActions:function(){api.__parent__();if(this.state.chosen!==false&&this.props.control.chosen!==false){this.loadingChosenTimer&&clearTimeout(this.loadingChosenTimer);this.loadingChosenTimer=setTimeout(function(){api.Ajax.loadStylesheet(api.urls.root+'/media/jui/css/chosen.css');api.Ajax.loadScript(api.urls.root+'/media/jui/js/chosen.jquery.min.js',this.initChosen.bind(this));}.bind(this),500);}var tooltip=(this.refs.wrapper||ReactDOM.findDOMNode(this)).querySelector('.has-tooltip');if(tooltip){tooltip=api.findReactComponent(tooltip);if(tooltip){tooltip.forceUpdate();}}var cyy6yS9a=api.Rc4GEtCP(this.props.setting);if(cyy6yS9a!==false){var inputs=(this.refs.wrapper||ReactDOM.findDOMNode(this)).querySelectorAll('[name^="'+this.props.setting+'"]');for(var i=0;i<inputs.length;i++){if(api.uKCTvbAY()){if(!jQuery(inputs[i].parentNode).data('bs.popover')){jQuery(inputs[i].parentNode).tooltip({html:true,title:api.Text.parse('Q3TX2PUM'),trigger:'hover',placement:'auto',container:'body'});}if(!inputs[i].parentNode._listened_clickEvent){api.Event.add(inputs[i].parentNode,'click',function(cyy6yS9a,event){var target=event.target;if(!target.name){target=target.querySelector('[name]');}if(target&&target.disabled){api.w0bj7Dgp(api.Text.GmTf5Hzw([115,101,116,116,105,110,103,45])+cyy6yS9a);}}.bind(this,cyy6yS9a));inputs[i].parentNode._listened_clickEvent=true;}}else{if(jQuery(inputs[i].parentNode).data('bs.tooltip')){jQuery(inputs[i].parentNode).tooltip('dispose');}}}}},initChosen:function(options,force){if(jQuery.fn.chosen===undefined){return;}var options=options||{disable_search:true};var selects;try{selects=(this.refs.wrapper||ReactDOM.findDOMNode(this)).querySelectorAll('select');}catch(e){selects=[];}for(var i=0;i<selects.length;i++){if(force&&selects[i]._initialized_chosen){delete selects[i]._initialized_chosen;jQuery(selects[i]).chosen('destroy');}if(selects[i]._initialized_chosen){jQuery(selects[i]).trigger('liszt:updated');}else{jQuery(selects[i]).chosen(options).on('change',function(event){if(event.target.name){this.change(event);}}.bind(this));selects[i]._initialized_chosen=true;}}},componentWillUnmount:function(){var selects=(this.refs.wrapper||ReactDOM.findDOMNode(this)).querySelectorAll('select');for(var i=0;i<selects.length;i++){if(selects[i]._initialized_chosen){delete selects[i]._initialized_chosen;jQuery(selects[i]).chosen('destroy');}}},change:function(event){var setting=this.props.setting,value;if(arguments.length==2&&arguments[0]==setting){value=arguments[1];}else{var control=event.target?event.target:event;if(control.nodeName=='SELECT'){if(control.multiple){var options=control.querySelectorAll('option');value=[];for(var i=0,n=options.length;i<n;i++){if(options[i].selected){value.push(options[i].value);}}}else{value=control.options[control.selectedIndex].value;}}else if(control.nodeName=='INPUT'){if(control.type=='checkbox'){if(control.name.substr(-2)=='[]'){value=[];var container=control.parentNode;while(!container.classList.contains('form-group')&&container.nodeName!='BODY'){container=container.parentNode;}var checkboxes=container.querySelectorAll('input');for(var i=0,n=checkboxes.length;i<n;i++){if(checkboxes[i].checked){value.push(checkboxes[i].value);}}}else{value=control.checked?control.value:null;}}else if(control.type=='radio'){value=control.checked?control.value:null;}else{value=control.value;}}else{value=control.value;}if(control.nodeName!='TEXTAREA'&&['checkbox','radio'].indexOf(control.type)>-1){this.props.form.skipSaving=false;}}if(typeof value=='string'&&value.match(/^[\[\{].+[\}\]]$/)){value=JSON.parse(value);}if(this.props.form.skipSaving){this.setState({value:value});}this.props.form.updateState(setting,value);},resetState:function(event){if(this.state.value!=''){this.change(this.props.setting,'');}},renderPopupInput:function(title,allowCustomInput){return React.createElement('div',{key:this.props.id||api.Text.toId(),className:'form-group '+(this.props.control.className?this.props.control.className:'')},React.createElement('label',null,this.label,this.tooltip),React.createElement('div',{className:'input-group'},React.createElement('input',{ref:'field',type:'text',name:this.props.setting,value:this.value||this.state.value,disabled:allowCustomInput?false:true,className:'form-control',onChange:allowCustomInput?this.change:null}),React.createElement('span',{className:'input-group-addon'},React.createElement('a',{href:'#',onClick:this.popupForm.bind(this,title||this.props.control.type)},'...')),React.createElement('span',{className:'input-group-addon'},React.createElement('a',{href:'#',onClick:this.resetState},React.createElement('i',{className:'fa fa-remove'})))));},popupForm:function(title){var data=this.popupData();if(!data.form&&data.rows){data={form:data};}if(!data.rel){data.rel=this;}if(!data.editor&&this.props.form.props.editor){data.editor=this.props.form.props.editor;}if(!data.values){data.values=this.state.value;}if(!data.form['class']){data.form['class']='container-fluid';}else{data.form['class']+=' container-fluid';}api.Modal.get({id:api.Text.toId(title),type:'form',title:title,content:data});},saveSettings:function(values){this.change(this.props.setting,values);}});var ElementAlert=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,type:React.PropTypes.string,data:React.PropTypes.string},getDefaultProps:function(){return{id:'',type:'info',data:'',onClose:null};},render:function(){return React.createElement('div',{key:this.props.id||api.Text.toId(),className:'alert alert-'+this.props.type+' mb-0',ref:'mountedDOMNode'},React.createElement('a',{href:'#',className:'close ml-4',onClick:this.close},'\xD7'),api.Text.parse(this.props.data));},close:function(event){event.preventDefault();this.refs.mountedDOMNode.classList.add('hidden');if(typeof this.props.onClose=='function'){this.props.onClose(this.props.id);}}});var ElementBanner=api.ElementBanner=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,type:React.PropTypes.string},getDefaultProps:function(){return{id:'',type:''};},getInitialState:function(){return{html:''};},componentWillMount:function(){if(this.props.type!=''){api.Ajax.request(api.urls.ajaxBase+api.urls.Mrk1ZsC2+'&type='+this.props.type,function(res){if(res.responseJSON&&res.responseJSON.data){this.setState({name:res.responseJSON.data.name||'',html:res.responseJSON.data.content||''});}}.bind(this));}},render:function(){if(this.state.html==''||!this.state.html){return null;}return React.createElement('div',{key:this.props.id||api.Text.toId(),ref:'mountedDOMNode',className:'banner banner-'+this.props.type},api.Text.parse(this.state.html),React.createElement('a',{href:'javascript:void(0)',className:'remove-banner',onClick:function(event){event.preventDefault();api.w0bj7Dgp('ErWVstHA',this.props.type);}.bind(this)},'\xD7'));},initActions:function(){api.__parent__();if(this.refs.mountedDOMNode&&!this.refs.mountedDOMNode._listened_clickEvent){api.Event.add(this.refs.mountedDOMNode,'click',this.handleClick);this.refs.mountedDOMNode._listened_clickEvent=true;}},handleClick:function(event){if(!event.target.classList||!event.target.classList.contains('remove-banner')){if(event.target.nodeName=='A'){event.target.target='_blank';}var l;switch(this.props.type){case 'layout-footer':l='Footer';break;case 'inspector-panel':l='Inspector';break;}api.b3repxvd.h9VSyDAP('Banner','Layout:'+' '+l,this.state.name);}},componentWillUnmount:function(){if(this.refs.mountedDOMNode&&this.refs.mountedDOMNode._listened_clickEvent){delete this.refs.mountedDOMNode._listened_clickEvent;api.Event.remove(this.refs.mountedDOMNode,'click',this.handleClick);}}});var ElementButton=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,href:React.PropTypes.string,type:React.PropTypes.string,icon:React.PropTypes.string,onClick:React.PropTypes.func,disabled:React.PropTypes.string,className:React.PropTypes.string,dataToggle:React.PropTypes.string},getDefaultProps:function(){return{id:'',href:'',type:'',icon:'',onClick:null,disabled:false,className:'',dataToggle:''};},render:function(){var className=this.props.type?'btn btn-'+this.props.type:'';if(this.props.className){className+=' '+this.props.className.trim();}var icon=api.Text.parse(this.props.icon);if(!this.props.href||this.props.href==''||this.props.href=='#'){var props={key:this.props.id||api.Text.toId(),ref:'mountedDOMNode',type:'button',disabled:this.props.disabled,className:className,onClick:this.click};if(this.props.dataToggle&&this.props.dataToggle!=''){props['data-toggle']=this.props.dataToggle;}return React.createElement('button',props,[typeof icon=='string'&&icon!=''?React.createElement('i',{className:'fa fa-'+icon}):icon,this.props.children]);}else{return React.createElement(ElementLink,{id:this.props.id,href:this.props.href,className:className+(this.props.disabled?' disabled':'')},typeof icon=='string'&&icon!=''?React.createElement('i',{className:'fa fa-'+icon}):icon,this.props.children);}},click:function(event){event.preventDefault();if(typeof this.props.onClick=='function'){this.props.onClick(event);}else if(this.refs.mountedDOMNode&&this.refs.mountedDOMNode.classList.contains('dropdown-toggle')){if(this.refs.mountedDOMNode.nextElementSibling.classList.contains('dropdown-menu')){this.refs.mountedDOMNode.nextElementSibling.classList.toggle('open');}if(!document._added_hideDropdownMenu){api.Event.add(document,'click',this.hideDropdownMenu);document._added_hideDropdownMenu=true;}}},hideDropdownMenu:function(event){var menus=document.querySelectorAll('.dropdown-menu.open');if(menus.length){var parent=event.target;while(parent.nodeName!='HTML'&&parent.nodeName!='BODY'&&!parent.classList.contains('dropdown-toggle')&&!parent.classList.contains('dropdown-menu')){parent=parent.parentNode;}for(var i=0,n=menus.length;i<n;i++){if(parent.classList.contains('dropdown-toggle')){if(menus[i]!=parent.nextElementSibling){menus[i].classList.remove('open');}}else if(menus[i]!=parent){menus[i].classList.remove('open');}}}},componentWillUnmount:function(){api.__parent__();if(document._added_hideDropdownMenu){delete document._added_hideDropdownMenu;api.Event.remove(document,'click',this.hideDropdownMenu);}}});var ElementForm=api.ElementForm=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,rel:React.PropTypes.element,form:React.PropTypes.object,values:React.PropTypes.object,inline:React.PropTypes.bool,toolbar:React.PropTypes.bool,className:React.PropTypes.string,emptyClass:React.PropTypes.string,emptyMessage:React.PropTypes.node},getDefaultProps:function(){return{id:'',rel:null,form:{},values:{},inline:true,toolbar:false,className:'',emptyClass:'empty-form',emptyMessage:null};},getInitialState:function(){return this.props;},componentWillReceiveProps:function(newProps){api.__parent__();var state;for(var p in newProps){if(this.props.hasOwnProperty(p)){if(typeof newProps[p]=='object'){try{if(JSON.stringify(this.props[p])!=JSON.stringify(newProps[p])){state=state||{};state[p]=newProps[p];}}catch(e){if(this.props[p]!=newProps[p]){state=state||{};state[p]=newProps[p];}}}else if(this.props[p]!=newProps[p]){state=state||{};state[p]=newProps[p];}}}if(state){this.setState(state);}},componentWillMount:function(){api.__parent__();api.Text.setData(this);},render:function(){var form=[];if(this.state.form){if(this.state.form.html){form.push(this.state.form.html);}else{delete this.loadingControlComponent;if(this.state.form.description){form.push(React.createElement('p',{className:'form-description'},api.Text.parse(this.state.form.description)));}for(var p in{rows:'',cols:'',groups:'',controls:''}){if(this.state.form[p]){form=form.concat(this['render'+api.Text.capitalize(p)](this.state.form[p]));}}}}if(!form.length){return React.createElement('div',{ref:'mountedDOMNode',className:'form-container '+this.state.emptyClass},this.state.emptyMessage?api.Text.parse(this.state.emptyMessage):React.createElement(ElementLoading,{className:'inline'}));}var formTitle;if(this.state.toolbar||this.state.form.title){var className='clearfix sidebar-heading border-bottom px-3 d-flex align-items-center',title=this.state.form.title;if(typeof title=='string'){className+=' '+title.replace(/[^a-zA-Z0-9\-_]+/g,'-').toLowerCase();title=React.createElement('span',{className:'form-title'},api.Text.parse(title));}formTitle=React.createElement('div',{className:className},title,this.state.toolbar);}return React.createElement('div',{ref:'mountedDOMNode',className:'form-container '+this.state.className},formTitle,React.createElement('div',{className:'px-3 '+(this.state.form['class']?this.state.form['class']:null)},form));},renderRows:function(rows){var elms=[];rows.map(row=>{var columns=[],groups=[],controls=[];if(row.cols){columns=this.renderCols(row.cols);}if(row.groups){groups=this.renderGroups(row.groups);}if(row.controls){controls=this.renderControls(row.controls);}if(columns.length||groups.length||controls.length){elms.push(React.createElement('div',{className:'row '+(row['class']||'')+(this.isVisible(row.requires)?'':' hidden')},row.title||row.prefix?React.createElement('div',{className:'col-12 row-title mb-3'},row.title?React.createElement('h6',{className:'font-weight-bold'},api.Text.parse(row.title)):null,row.prefix?React.createElement('p',{className:'row-description'},api.Text.parse(row.prefix)):null):null,columns,groups,controls,row.suffix?React.createElement('div',{className:'col-12'},row.suffix?React.createElement('p',{className:'row-description'},api.Text.parse(row.suffix)):null):null));}});return elms;},renderCols:function(cols){var elms=[];cols.map(col=>{var rows=[],groups=[],controls=[];if(col.rows){rows=this.renderRows(col.rows);}if(col.groups){groups=this.renderGroups(col.groups);}if(col.controls){controls=this.renderControls(col.controls);}if(rows.length||groups.length||controls.length){elms.push(React.createElement('div',{className:(col['class']||'')+(this.isVisible(col.requires)?'':' hidden')},col.title?React.createElement('div',{className:'column-title'},React.createElement('h6',{className:'font-weight-bold'},api.Text.parse(col.title))):null,col.description?React.createElement('p',{className:'column-description'},api.Text.parse(col.description)):null,rows,groups,controls));}});return elms;},renderGroups:function(groups){var elms=[];groups.map(group=>{var rows=[],columns=[],controls=[];if(group.rows){rows=this.renderRows(group.rows);}if(group.cols){columns=this.renderCols(group.cols);}if(group.controls){controls=this.renderControls(group.controls);}if(rows.length||columns.length||controls.length){elms.push(React.createElement('div',{className:'jsn-card '+(group['class']||'')+(this.isVisible(group.requires)?'':' hidden')},group.title?React.createElement('div',{className:'jsn-card__title'},React.createElement('h3',null,api.Text.parse(group.title))):null,React.createElement('div',{className:'jsn-card__content'},group.description?React.createElement('p',{className:'group-description'},api.Text.parse(group.description)):null,rows,columns,controls)));}});return elms;},renderControls:function(controls){var elms=[],disabled=false,keyName,value;for(var setting in controls){keyName=(this.state.rel?this.state.rel.props.id:'')+'_'+setting;if(api.uKCTvbAY()&&api.Rc4GEtCP(setting)!==false){disabled=true;}if(this.state.values&&this.state.values[setting]!==undefined){value=this.state.values[setting];}else{if(controls[setting]['default']===undefined){controls[setting]['default']=api.bqZHB4bn.PwjNzhrn(setting);}if(controls[setting]['default']!==undefined){value=controls[setting]['default'];}else{value='';}}var control=api.Text.toCamelCase(controls[setting].type,true);if(control.indexOf('Input')<0){control='Input'+control;}var ComponentName=findObject(control);if(!ComponentName&&api.inputs[controls[setting].type]){api.Ajax.request(api.inputs[controls[setting].type],function(res){eval('(function(api){'+res.responseText+'})(api);');});this.loadingControlComponent=this.loadingControlComponent||true;}else if(ComponentName){elms.push(React.createElement(ComponentName,{id:keyName,key:keyName,ref:setting,form:this,value:value,setting:setting,control:controls[setting],disabled:disabled}));}else{elms.push(React.createElement(api.InputText,{id:keyName,key:keyName,ref:setting,form:this,value:value,setting:setting,control:controls[setting],disabled:disabled}));}this.state.values[setting]=value;}if(this.loadingControlComponent){this.loadingControlComponentTimer&&clearTimeout(this.loadingControlComponentTimer);this.loadingControlComponentTimer=setTimeout(this.forceUpdate.bind(this),500);}return elms;},componentDidUpdate:function(){if(!this.loadingControlComponent){var inputs=this.refs.mountedDOMNode.querySelectorAll('input,textarea');for(var i=0,n=inputs.length;i<n;i++){var input=inputs[i];if(input.nodeName=='TEXTAREA'||['checkbox','radio'].indexOf(input.type)<0){if(!input._listened_focusBlurKeyupEvent){api.Event.add(input,'focus',this.focus);api.Event.add(input,'blur',this.blur);api.Event.add(input,'keyup',this.keyup);input._listened_focusBlurKeyupEvent=true;}}}api.Event.trigger(this,'FormRendered');}},componentWillUnmount:function(){var inputs=this.refs.mountedDOMNode.querySelectorAll('input,textarea');for(var i=0,n=inputs.length;i<n;i++){var input=inputs[i];if(input.nodeName=='TEXTAREA'||['checkbox','radio'].indexOf(input.type)<0){if(input._listened_focusBlurKeyupEvent){delete input._listened_focusBlurKeyupEvent;api.Event.remove(input,'focus',this.focus);api.Event.remove(input,'blur',this.blur);api.Event.remove(input,'keyup',this.keyup);}}}},focus:function(event){this.skipSaving=true;if(this.state.inline){event.target.__current__=event.target.value;}},blur:function(event){this.skipSaving=false;if(this.state.inline&&event.target.__current__!=event.target.value){this.saveSettings();}},keyup:function(event){if(this.state.inline&&event.keyCode==13&&event.target.__current__!=event.target.value){this.skipSaving=false;this.saveSettings();}this.skipSaving=true;},isVisible:function(requires){var visible=true;if(requires){for(var p in requires){if(!visible){return;}if(requires.hasOwnProperty(p)){if(['string','number'].indexOf(typeof requires[p])>-1){if(!isNaN(parseInt(requires[p]))){if(parseInt(requires[p])!=parseInt(this.state.values[p])){visible=false;}}else if(requires[p]!=this.state.values[p]){visible=false;}}else if(requires[p]instanceof Array){switch(requires[p][0]){case '=':case '==':if(!isNaN(parseInt(requires[p][1]))){if(parseInt(requires[p][1])!=parseInt(this.state.values[p])){visible=false;}}else if(requires[p][1]!=this.state.values[p]){visible=false;}break;case '!=':case '<>':if(!isNaN(parseInt(requires[p][1]))){if(parseInt(requires[p][1])==parseInt(this.state.values[p])){visible=false;}}else if(requires[p][1]==this.state.values[p]){visible=false;}break;}}}}}return visible;},updateState:function(setting,value){var values=this.state.values;if(!values||values instanceof Array){values={};}values[setting]=value;if(this.state.rel&&this.state.rel.updateState){this.state.rel.updateState(values);}if(this.skipSaving){this.state.values=values;this.setting_just_changed=setting;}else{this.setState({values:values});api.Event.trigger(this,'FormChanged',{changedElement:this.refs[setting]});delete this.setting_just_changed;}if(this.state.inline){this.saveSettings(values);}},saveSettings:function(values,force){if(force||!this.skipSaving){values=values||this.state.values;if(this.state.rel&&this.state.rel.saveSettings){this.state.rel.saveSettings(values);}else if(this.props.editor&&this.props.editor.saveItemSettings){this.props.editor.saveItemSettings(this.state.rel,values);}if(this.setting_just_changed){api.Event.trigger(this,'FormChanged',{changedElement:this.refs[this.setting_just_changed]});delete this.setting_just_changed;}}}});var ElementInput=extendReactClass('MixinBase',{propTypes:{type:React.PropTypes.string,name:React.PropTypes.string,value:React.PropTypes.string,className:React.PropTypes.string,placeholder:React.PropTypes.string},getDefaultProps:function(){return{type:'text',name:'',value:'',className:'',placeholder:''};},getInitialState:function(){return{value:this.props.current!==undefined?this.props.current:this.props.value};},render:function(){var props={ref:'mountedDOMNode',type:this.props.type,name:this.props.name,value:this.state.value,className:this.props.className,placeholder:this.props.placeholder};if(['checkbox','radio'].indexOf(this.props.type)>-1){props.checked=this.props.value==this.state.value;props.onClick=this.change;}else{props.onClick=this.props.onClick||null;props.onChange=this.change;}return React.createElement('input',props);},change:function(event){var value;if(['checkbox','radio'].indexOf(this.props.type)>-1){value=event.target.checked?this.props.value:null;}else{value=event.target.value;}this.setState({value:value});if(event.type=='click'&&typeof this.props.onClick=='function'){this.props.onClick(event,this);}else if(event.type=='change'&&typeof this.props.onChange=='function'){this.props.onChange(event,this);}}});var ElementLink=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,href:React.PropTypes.string,icon:React.PropTypes.string,type:React.PropTypes.string,title:React.PropTypes.string,target:React.PropTypes.string,onClick:React.PropTypes.func,className:React.PropTypes.string},getDefaultProps:function(){return{id:'',href:'',icon:'',type:'',title:'',target:'',onClick:null,className:''};},render:function(){return React.createElement('a',{key:this.props.id||api.Text.toId(),className:this.props.className,href:this.props.href,title:this.props.title,target:this.props.target,rel:this.props.target=='_blank'?'noopener noreferrer':'',onClick:this.click},this.props.icon!=''?React.createElement('i',{className:'fa fa-'+this.props.icon}):null,this.props.children||this.props.title,this.props.type=='external'?' ':null,this.props.type=='external'?React.createElement('i',{className:'fa fa-external-link'}):null);},click:function(event){if(this.props.type=='trigger-other'){event.preventDefault();var hrefs=this.props.target.split(',');for(var i=0,n=hrefs.length;i<n;i++){var element=document.querySelector('a[href="'+hrefs[i].trim()+'"]');if(element){element.click();}}}if(typeof this.props.onClick=='function'){this.props.onClick(event);}}});var ElementLoading=api.ElementLoading=extendReactClass('MixinBase',{propTypes:{image:React.PropTypes.string,className:React.PropTypes.string},getDefaultProps:function(){var root=window.location.href.split(/\/(administrator|index\.php)/)[0];return{image:root+'/plugins/system/sunfw/assets/images/logo-loading.svg',className:''};},render:function(){var className='jsn-loading '+this.props.className.trim();return React.createElement('div',{ref:'mountedDOMNode',className:className},React.createElement('div',{className:'loader'},React.createElement('img',{src:this.props.image}),React.createElement('div',{className:'circle'}),React.createElement('div',{className:'circle'}),React.createElement('div',{className:'circle'}),React.createElement('div',{className:'circle'}),React.createElement('div',{className:'circle'})));}});var ElementMenu=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,type:React.PropTypes.string,items:React.PropTypes.array,className:React.PropTypes.string},getDefaultProps:function(){return{id:'',type:'',items:[],className:''};},render:function(){if(!this.props.items.length){return null;}var className=[];switch(this.props.type){case 'tabs':className.push('navbar-nav');break;case 'dropdown':className.push('dropdown-menu');break;}if(this.props.className){className.push(this.props.className.trim());}return React.createElement('ul',{className:className.join(' ')},this.props.items.map(item=>{var className=[];if(item.items){className.push('dropdown');}switch(this.props.type){case 'tabs':className.push('nav-item');break;case 'inline':className.push('d-inline-block');break;}if(item.listClass){className.push(item.listClass);}return React.createElement('li',{className:className.join(' ')},React.createElement(ElementLink,{id:item.id,href:item.href,icon:item.icon,type:item.type,title:api.Text.capitalize(item.title,true),target:item.target,onClick:item.onClick,className:(this.props.type=='tabs'?'nav-link':'')+' '+(item.className||'')}),item.suffix?api.Text.parse(item.suffix):null,item.items?React.createElement(ElementMenu,{id:item.dropdownId,type:'dropdown',items:item.items,className:item.dropdownClass}):null);}));}});var ElementModal=api.ElementModal=extendReactClass('MixinBase',{getDefaultProps:function(){return{id:'',show:false,type:'',title:'',width:'720px',height:'',content:'',buttons:[],preserve:false,className:null,centralize:true,close:null,confirm:null,cancel:null,showCloseButton:false};},getInitialState:function(){return this.props;},render:function(){var content;switch(this.state.type){case 'form':if(!this.state.content.parent){this.state.content.parent=this;}if(this.props.editor&&!this.state.content.editor){this.state.content.editor=this.props.editor;}this.state.content.ref='form';content=React.createElement(ElementForm,this.state.content);break;case 'iframe':this.state.content.ref='iframe';if(this.state.content.src){this.state.content.key=this.state.content.src.replace(/[^a-zA-Z0-9\-_]+/g,'');}content=React.createElement('iframe',this.state.content);break;default:content=api.Text.parse(this.state.content);break;}var footer,buttons=[];if(this.state.buttons instanceof Array){this.state.buttons.map(button=>{var button_text='';if(button.text){button_text=api.Text.parse(button.text);delete button.text;}if(button['class']){button.className=button['class'];delete button['class'];}if(!button.href&&!button.type){button.type='button';}if(button.href){buttons.push(React.createElement('a',button,button_text));}else{buttons.push(React.createElement('button',button,button_text));}button.text=button_text;});}if(this.state.buttons!='disabled'&&!buttons.length){buttons=[React.createElement('button',{id:this.state.id+'-confirm-button',type:'button',onClick:this.confirm,className:'btn btn-primary'},api.Text.parse('ok')),React.createElement('button',{id:this.state.id+'-cancel-button',type:'button',onClick:this.cancel,className:'btn btn-default'},api.Text.parse('cancel'))];}if(buttons.length){footer=React.createElement('div',{className:'modal-footer'},buttons);}return React.createElement('div',{id:this.state.id?this.state.id:api.Text.toId('modal'),ref:'mountedDOMNode',style:{display:'none'},className:'modal fade'+(this.state.className?' '+this.state.className:'')},React.createElement('div',{className:'modal-dialog'},React.createElement('div',{className:'modal-content'},React.createElement('div',{className:'modal-header'},React.createElement('h4',{className:'modal-title'},api.Text.parse(this.state.title)),this.state.showCloseButton?React.createElement('button',{type:'button',onClick:this.close,className:'close'},React.createElement('span',null,'\xD7')):null),React.createElement('div',{className:'modal-body'},content),footer)));},initActions:function(){if(this.state.show){this.show();}if(this.state.type=='form'&&this.refs.form){this.refs.form.setState({inline:false});}},show:function(event){event&&event.preventDefault();this.closeTimeout&&clearTimeout(this.closeTimeout);this.refs.mountedDOMNode.style.display='block';var modal_dialog=this.refs.mountedDOMNode.querySelector('.modal-dialog');if(this.state.width){var width=parseInt(this.state.width);if(this.state.width.substr(-1)=='%'){width=window.innerWidth/100 * width;}if(window.innerWidth<width){width=window.innerWidth;}modal_dialog.style.width=width+'px';}modal_dialog.style.marginTop=null;var container_css=window.getComputedStyle(modal_dialog),modal_header=this.refs.mountedDOMNode.querySelector('.modal-content>.modal-header'),header_rect=modal_header?modal_header.getBoundingClientRect():{height:0},modal_footer=this.refs.mountedDOMNode.querySelector('.modal-content>.modal-footer'),footer_rect=modal_footer?modal_footer.getBoundingClientRect():{height:0},modal_body=this.refs.mountedDOMNode.querySelector('.modal-content>.modal-body'),height;modal_body.style.overflowX='hidden';modal_body.style.overflowY='auto';if(this.state.height){var height=parseInt(this.state.height);if(this.state.height.substr(-1)=='%'){height=window.innerHeight/100 * height;}if(window.innerHeight<height){height=window.innerHeight;}height-=header_rect.height+footer_rect.height;modal_body.style.height=height+'px';modal_body.style.maxHeight=null;}else{height=window.innerHeight-parseInt(container_css.getPropertyValue('margin-top'))-parseInt(container_css.getPropertyValue('margin-bottom'))-header_rect.height-footer_rect.height;modal_body.style.height=null;modal_body.style.maxHeight=height+'px';}if(this.state.type=='iframe'&&['auto','100%'].indexOf(this.state.content.height)>-1){var modal_body_css=window.getComputedStyle(modal_body),iframe_css=window.getComputedStyle(this.refs.iframe);this.refs.iframe.style.height=height-parseInt(modal_body_css.getPropertyValue('padding-top'))-parseInt(modal_body_css.getPropertyValue('padding-bottom'))-parseInt(iframe_css.getPropertyValue('border-top-width'))-parseInt(iframe_css.getPropertyValue('border-bottom-width'))+'px';modal_body.style.overflowY='hidden';}if(this.state.centralize){modal_dialog.style.marginTop=Math.floor((window.innerHeight-modal_dialog.getBoundingClientRect().height)/2)+'px';}if(this.refs.form&&!this.refs.form._listened_changeEvent){api.Event.add(this.refs.form.refs.mountedDOMNode,'change',this.update);this.refs.form._listened_changeEvent=true;}if(this.refs.form&&!this.refs.form._listened_FormRenderedEvent){api.Event.add(this.refs.form,'FormRendered',this.update);this.refs.form._listened_FormRenderedEvent=true;}if(!this.refs.mountedDOMNode._listened_resizeEvent){api.Event.add(window,'resize',this.show);this.refs.mountedDOMNode._listened_resizeEvent=true;}this.refs.mountedDOMNode.classList.add('show');},update:function(event){if(this.state.centralize&&!this.state.height&&this.state.type=='form'&&this.refs.form){var formHeight=this.refs.form.refs.mountedDOMNode.getBoundingClientRect().height;if(this.lastFormHeight!=formHeight){this.show();}this.lastFormHeight=formHeight;}api.Event.trigger(this,'ModalUpdated');},close:function(event){event&&event.preventDefault();if(event!==false&&typeof this.state.close=='function'){this.state.close();}this.refs.mountedDOMNode.classList.remove('show');this.closeTimeout=setTimeout(function(){this.refs.mountedDOMNode.style.display='none';}.bind(this),250);if(this.refs.mountedDOMNode._listened_resizeEvent){delete this.refs.mountedDOMNode._listened_resizeEvent;api.Event.remove(window,'resize',this.show);}if(this.refs.form&&this.refs.form._listened_FormRenderedEvent){delete this.refs.form._listened_FormRenderedEvent;api.Event.remove(this.refs.form,'FormRendered',this.update);}if(this.refs.form&&this.refs.form._listened_changeEvent){delete this.refs.form._listened_changeEvent;api.Event.remove(this.refs.form.refs.mountedDOMNode,'change',this.update);}},confirm:function(event){event.preventDefault();if(typeof this.state.confirm=='function'){this.state.confirm();}if(this.props.parent&&typeof this.props.parent.confirm=='function'){this.props.parent.confirm();}if(this.state.type=='form'&&this.refs.form){this.refs.form.saveSettings(null,true);}this.close(false);},cancel:function(event){event.preventDefault();if(typeof this.state.cancel=='function'){this.state.cancel();}if(this.props.parent&&typeof this.props.parent.cancel=='function'){this.props.parent.cancel();}this.close(false);}});var ElementTooltip=api.ElementTooltip=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,hint:React.PropTypes.string},getDefaultProps:function(){return{id:'',hint:''};},render:function(){return React.createElement('span',{ref:'mountedDOMNode',key:this.props.id||api.Text.toId(),className:'has-tooltip','data-toggle':'tooltip','data-placement':'auto'},this.props.children||React.createElement('i',{className:'fa fa-question-circle'}));},componentDidMount:function(){api.__parent__();this.initTooltip();},componentDidUpdate:function(){api.__parent__();this.initTooltip();},componentWillUnmount:function(){api.__parent__();this.deinitTooltip();},initTooltip:function(){this.deinitTooltip();jQuery(this.refs.mountedDOMNode).tooltip({html:true,title:this.props.hint,trigger:'hover',container:'body'}).click(function(event){event.preventDefault();event.stopPropagation();});},deinitTooltip:function(){if(jQuery(this.refs.mountedDOMNode).data('bs.tooltip')){jQuery(this.refs.mountedDOMNode).tooltip('dispose');}}});var InputPassword=api.InputPassword=extendReactClass('MixinInput',{render:function(){if(this.props.control.suffix){return React.createElement('div',{className:'form-group '+(this.props.control.className?this.props.control.className:'')},React.createElement('label',{forName:this.props.id},this.label,this.tooltip),React.createElement('div',{className:'input-group'},React.createElement('input',{ref:'control',type:'password',name:this.props.setting,value:this.state.value,onChange:this.change,className:'form-control',placeholder:api.Text.parse(this.props.control.placeholder)}),React.createElement('div',{className:'input-group-addon'},api.Text.parse(this.props.control.suffix))));}else{return React.createElement('div',{className:'form-group '+(this.props.control.className?this.props.control.className:'')},React.createElement('label',{forName:this.props.id},this.label,this.tooltip),React.createElement('input',{ref:'control',type:'password',name:this.props.setting,value:this.state.value,onChange:this.change,className:'form-control',placeholder:api.Text.parse(this.props.control.placeholder)}));}}});var InputText=api.InputText=extendReactClass('MixinInput',{render:function(){if(this.props.control.suffix){return React.createElement('div',{className:'form-group '+(this.props.control.className?this.props.control.className:'')},this.label?React.createElement('label',{forName:this.props.id},this.label,this.tooltip):null,React.createElement('div',{className:'input-group'},React.createElement('input',{ref:'control',type:'text',name:this.props.setting,value:this.state.value,onChange:this.change,disabled:this.props.disabled,className:'form-control',placeholder:api.Text.parse(this.props.control.placeholder)}),React.createElement('div',{className:'input-group-addon'},api.Text.parse(this.props.control.suffix))));}else{return React.createElement('div',{className:'form-group '+(this.props.control.className?this.props.control.className:'')},this.label?React.createElement('label',{forName:this.props.id},this.label,this.tooltip):null,React.createElement('input',{ref:'control',type:'text',name:this.props.setting,value:this.state.value,onChange:this.change,disabled:this.props.disabled,className:'form-control',placeholder:api.Text.parse(this.props.control.placeholder)}));}}});var ComponentAlerts=extendReactClass('MixinBase',{getInitialState:function(){return{items:[]};},render:function(){if(!this.state.items.length){return null;}var closedAlerts=JSON.parse(localStorage.getItem(api.namespace+'ClosedAlerts'))||[];return React.createElement('div',{className:'sunfw-alert-container'},this.state.items.map(item=>{if(item&&item.id&&item.type&&item.data&&closedAlerts.indexOf(item.id)<0){return React.createElement(ElementAlert,{id:item.id,type:item.type,data:item.data,onClose:this.close.bind(this,item.id)});}}));},componentDidMount:function(){api.__parent__();api.Event.add(this.props.doc,'UpdateDataFetched',this.update);},componentDidUpdate:function(){api.__parent__();api.Event.trigger(window,'resize');},componentWillUnmount:function(){api.Event.remove(this.props.doc,'UpdateDataFetched',this.update);},update:function(event){var alerts=[];if(event.type=='UpdateDataFetched'){var data=this.props.doc.refs.update.data,alerts=[];for(var target in data){if(data[target].hasUpdate){alerts.push({id:'update-'+target,type:'danger alert-sunfw-update',data:React.createElement('div',{className:'d-flex justify-content-center'},React.createElement('p',null,React.createElement('strong',null,data[target].message,' ',React.createElement('span',{className:'sunfw-new-version'},data[target].newVersion))),React.createElement('a',{href:'#',className:'btn btn-danger sunfw-update-now','data-target':target,onClick:this.props.doc.refs.update.update},api.Text.parse('update')))});}}}if(alerts.length){var items=this.state.items;items=alerts.concat(items);this.setState({items:items});}},close:function(id){var items=this.state.items;for(var i=0,n=items.length;i<n;i++){if(!items[i]){continue;}if(items[i].id==id){items.splice(i,1);var closedAlerts=JSON.parse(localStorage.getItem(api.namespace+'ClosedAlerts'))||[];closedAlerts.push(id);localStorage.setItem(api.namespace+'ClosedAlerts',JSON.stringify(closedAlerts));}}this.setState({items:items});}});var ComponentBody=extendReactClass('MixinBase',{getInitialState:function(){return{active:localStorage.getItem(api.namespace+'ActiveTab')};},initConfig:function(config){if(config.inputs){api.inputs=api.inputs||config.inputs;delete config.inputs;}if(config.textMapping){api.Text.setData(this,config.textMapping);delete config.textMapping;}this.config=config;this.loadingPaneComponents=0;var load_panes=function(tabs){for(var i=0,n=tabs.length;i<n;i++){if(tabs[i].render&&tabs[i].render.file){var ComponentName=findObject(tabs[i].render.name);if(ComponentName){continue;}this.loadingPaneComponents++;api.Ajax.loadScript(tabs[i].render.file,function(){this.loadingPaneComponents--;this.forceUpdateTimer&&clearTimeout(this.forceUpdateTimer);this.forceUpdateTimer=setTimeout(this.forceUpdate.bind(this),500);}.bind(this));}else if(tabs[i].items){load_panes(tabs[i].items);}}}.bind(this);load_panes(this.config.tabs);},componentWillMount:function(){if(this.props.cfg){this.initConfig(this.props.cfg);}var form=document.getElementById('template-admin-form'),fields=form.querySelectorAll('input,select');this.form={'class':'form-inline',controls:{}};for(var i=0,n=fields.length;i<n;i++){if(!fields[i].name||fields[i].name==''){continue;}if(fields[i].name.match(/^jform\[([^\]]+)\]$/)){fields[i].name=fields[i].name.replace(/^jform\[([^\]]+)\]$/,'$1');}this.form.controls[fields[i].name]={type:fields[i].nodeName=='INPUT'?fields[i].type:fields[i].nodeName.toLowerCase(),'default':fields[i].nodeName=='INPUT'?fields[i].value:fields[i].options[fields[i].selectedIndex].value,disabled:fields[i].getAttribute('disabled')?true:false};if(fields[i].nodeName=='SELECT'){this.form.controls[fields[i].name].className='ml-2';this.form.controls[fields[i].name].options=[];for(var j=0,m=fields[i].options.length;j<m;j++){this.form.controls[fields[i].name].options.push({label:fields[i].options[j].textContent,value:fields[i].options[j].value});}}}form.parentNode.removeChild(form);},componentWillReceiveProps:function(newProps){try{if(JSON.stringify(this.props.cfg)!=JSON.stringify(newProps.cfg)){this.initConfig(newProps.cfg);this.forceUpdate();}}catch(e){if(this.props.cfg!=newProps.cfg){this.initConfig(newProps.cfg);this.forceUpdate();}}},render:function(){if(!this.config){return null;}for(var i=0;i<this.config.tabs.length;i++){if(api.jGPQpB1n(this.config.tabs[i].href.substr(1))){this.config.tabs[i].suffix=React.createElement('span',{className:'badge badge-danger'},api.Text.parse('Sbrr2pJQ'));}}return React.createElement('div',{id:this.props.id,ref:'mountedDOMNode'},React.createElement('div',{id:'sunfw-nav-tab',ref:'navTabs',className:'main-nav container-fluid'},React.createElement('nav',{className:'navbar navbar-expand-lg p-0'},React.createElement('div',{className:'collapse navbar-collapse'},React.createElement(ElementForm,{ref:'form',rel:this,form:this.form,inline:true,emptyMessage:''}),React.createElement('i',{ref:'saving-status',className:'fa fa-circle-o-notch fa-spin text-white ml-0 fade'}),React.createElement(ElementMenu,{id:'sunfw-admin-tab',type:'tabs',items:this.config.tabs,className:'mr-auto ml-4'}),React.createElement(ComponentButtons,{items:this.config.buttons})))),React.createElement('div',{id:'sunfw-tab-content',ref:'tabPanes',className:'tab-content'},this.config.tabs.map(tab=>{var ComponentName;if(tab.render&&tab.render.name){ComponentName=findObject(tab.render.name);}return React.createElement('div',{id:tab.href.substr(1),className:'tab-pane main-pane fade'+(tab.listClass=='hidden'?' helper-pane':'')},tab.listClass=='hidden'?React.createElement('div',{className:'sub-nav container-fluid'},React.createElement('nav',{className:'row align-items-center main-nav'},React.createElement('div',{className:'col-auto'},React.createElement('h3',{className:'pane-title'},tab.title)),tab.items?React.createElement('div',{className:'col-auto mr-auto'},React.createElement('nav',{className:'navbar-expand-lg'},React.createElement(ElementMenu,{type:'tabs',items:tab.items}))):null,React.createElement('div',{className:'col-auto'+(tab.items?'':' ml-auto py-2')},React.createElement('button',{type:'button',className:'btn btn-success',onClick:this.toggleTab},React.createElement('i',{className:'fa fa-angle-left mr-1'}),' ',api.Text.parse('back'))))):null,ComponentName?React.createElement(ComponentName,{id:tab.href.substr(1),ref:tab.href.substr(1),doc:this.props.doc,cfg:tab.render.data||null}):tab.items?React.createElement('div',{className:'tab-content'},tab.items.map(sub=>{var ComponentName;if(sub.render&&sub.render.name){ComponentName=findObject(sub.render.name);}return React.createElement('div',{id:sub.href.substr(1),className:'tab-pane sub-pane fade'},ComponentName?React.createElement(ComponentName,{id:sub.href.substr(1),ref:sub.href.substr(1),doc:this.props.doc,cfg:sub.render.data||null}):null);})):null);})));},componentDidUpdate:function(){api.__parent__();if(this.refs.mountedDOMNode){var navs=this.refs.mountedDOMNode.querySelectorAll('a.toggle-pane');for(var i=0,n=navs.length;i<n;i++){if(!navs[i]._added_toggleTab){api.Event.add(navs[i],'click',this.toggleTab);navs[i]._added_toggleTab=true;}}}var saveAll=document.getElementById('sunfw-save-all');if(saveAll&&!saveAll._added_saveAllPane){api.Event.add(saveAll,'click',this.saveAllPane);saveAll._added_saveAllPane=true;}if(!api.dD3kkvvG()){api.w0bj7Dgp('TQRUYEYz');}if(!this.loadingPaneComponents){this.toggleTabTimer&&clearTimeout(this.toggleTabTimer);this.toggleTabTimer=setTimeout(function(){this.toggleTab(this.state.active);this.showGetStarted();setTimeout(function(){var loading=document.getElementById('sunfw-loading');if(loading){loading.parentNode.removeChild(loading);}},100);}.bind(this),100);}},componentWillUnmount:function(){api.__parent__();if(this.refs.mountedDOMNode){var navs=this.refs.mountedDOMNode.querySelectorAll('a.toggle-pane');for(var i=0,n=navs.length;i<n;i++){if(navs[i]._added_toggleTab){delete navs[i]._added_toggleTab;api.Event.remove(navs[i],'click',this.toggleTab);}}}var saveAll=document.getElementById('sunfw-save-all');if(saveAll&&saveAll._added_saveAllPane){delete saveAll._added_saveAllPane;api.Event.remove(saveAll,'click',this.saveAllPane);}},showGetStarted:function(event){if(!this.config){return;}if(!event&&(api.YSwRPXWC()==''||this.props.doc.state.hasData||localStorage.getItem(api.namespace+'HideGetStarted'))){return;}if(api.skipGetStarted){return;}api.Modal.get({id:'get-started',type:'html',title:api.Text.parse('get-started'),content:api.Text.parse(this.config.gettingStarted)||React.createElement('div',{className:'get-started-container'},React.createElement('div',{className:'row'},React.createElement('div',{className:'col-6'},React.createElement('h3',null,api.Text.parse('install-sample-data')),React.createElement('p',null,api.Text.parse('install-sample-data-intro')),React.createElement('a',{href:'javascript:void(0)',className:'btn btn-default',onClick:function(){this.toggleTab('sample-data');api.Modal.hide();api.b3repxvd.h9VSyDAP('Get Started','Install Sample Data');}.bind(this)},api.Text.parse('install-sample-data'))),React.createElement('div',{className:'col-6'},React.createElement('h3',null,api.Text.parse('read-documentation')),React.createElement('p',null,api.Text.parse('read-documentation-intro')),React.createElement('a',{href:api.urls.configManual,className:'btn btn-default',target:'_blank',rel:'noopener noreferrer',onClick:function(){api.b3repxvd.h9VSyDAP('Get Started','Read Documentation');}},api.Text.parse('read-documentation')))),React.createElement('div',{className:'modal-footer d-flex justify-content-between'},React.createElement('div',{className:'form-check form-check-inline mb-0'},React.createElement('label',{className:'form-check-label'},React.createElement(ElementInput,{type:'checkbox',name:'hide_get_started',value:'on',current:localStorage.getItem(api.namespace+'HideGetStarted'),onClick:this.toggleGetStarted,className:'form-check-input'}),api.Text.parse('hide-get-started-message'))),React.createElement('div',{className:'actions'},React.createElement('a',{href:'javascript:void(0)',className:'btn btn-primary mb-0',onClick:api.Modal.hide},api.Text.parse('got-it'))))),buttons:'disabled'});},toggleGetStarted:function(event){if(event.target.checked){localStorage.setItem(api.namespace+'HideGetStarted',event.target.value);}else{localStorage.removeItem(api.namespace+'HideGetStarted');}},toggleTab:function(event){if(!this.refs.mountedDOMNode){return;}if(event&&event.target){event.preventDefault();if(event.target.parentNode.classList.contains('active')){return;}}if(typeof event=='string'){this.state.active=event;}else if(event&&event.target&&event.target.href){this.state.active=event.target.href.substr(event.target.href.indexOf('#')+1);}else{var last=localStorage.getItem(api.namespace+'LastActiveTab');if(last){this.state.active=last;}else{this.state.active=this.config.tabs[0].href.substr(this.config.tabs[0].href.indexOf('#')+1);}}if(this.state.active!=''){var pane=this.refs.tabPanes.querySelector('.tab-pane.active'),subpane=pane?pane.querySelector('.tab-pane.active'):null;if(pane&&subpane){pane=subpane;}if(pane){pane.classList.remove('show');}setTimeout(function(){var nav,parent;if(pane){pane.classList.remove('active');if(pane.classList.contains('sub-pane')){parent=pane.parentNode;while(!parent.classList.contains('tab-pane')&&parent.nodeName!='BODY'){parent=parent.parentNode;}if(parent.classList.contains('tab-pane')){parent.classList.remove('active');parent.classList.remove('show');nav=parent.querySelector('a.toggle-pane[href^="#'+pane.id+'"]');if(nav){nav.parentNode.classList.remove('active');}}}nav=this.refs.mountedDOMNode.querySelector('a.toggle-pane[href^="#'+pane.id+'"]');if(nav){nav.parentNode.classList.remove('active');if(nav.parentNode.parentNode.classList.contains('dropdown-menu')){nav.parentNode.parentNode.parentNode.classList.remove('active');}}if(!pane.classList.contains('sub-pane')&&!nav.parentNode.classList.contains('hidden')){localStorage.setItem(api.namespace+'LastActiveTab',pane.id);}}nav=this.refs.mountedDOMNode.querySelector('a.toggle-pane[href^="#'+this.state.active+'"]');if(nav){this.refs.navTabs.classList.remove('hidden');nav.parentNode.classList.add('active');parent=nav.parentNode;while(parent.nodeName!='BODY'){if(parent.classList){if(parent.classList.contains('hidden')||parent.classList.contains('sub-nav')){this.refs.navTabs.classList.add('hidden');break;}}parent=parent.parentNode;}if(nav.parentNode.parentNode.classList.contains('dropdown-menu')){nav.parentNode.parentNode.parentNode.classList.add('active');}}pane=this.refs.tabPanes.querySelector('#'+this.state.active+'.tab-pane');if(pane){pane.classList.add('show');pane.classList.add('active');if(pane.classList.contains('sub-pane')){parent=pane.parentNode;while(!parent.classList.contains('tab-pane')&&parent.nodeName!='BODY'){parent=parent.parentNode;}if(parent.classList.contains('tab-pane')){parent.classList.add('show');parent.classList.add('active');nav=parent.querySelector('a.toggle-pane[href^="#'+this.state.active+'"]');if(nav){nav.parentNode.classList.add('active');}}}}api.Event.trigger(window,'resize');api.Event.trigger(this,'TabSwitched');}.bind(this),pane?200:0);localStorage.setItem(api.namespace+'ActiveTab',this.state.active);}},saveSettings:function(data){if(!this.defaultFormData||this.defaultFormData!=JSON.stringify(data)){document.getElementById('sunfw-save-all').disabled=false;this.defaultFormData=JSON.stringify(data);}},saveAllPane:function(event){event.preventDefault();if(!api.dD3kkvvG()){return api.w0bj7Dgp('TQRUYEYz');}if(this.defaultFormData){this.refs['saving-status'].classList.add('show');api.Ajax.request(api.urls.ajaxBase+'&context=admin&action=saveStyleSettings',function(res){this.refs['saving-status'].classList.remove('show');if(res.responseJSON.type=='success'){noty({text:res.responseJSON.data&&res.responseJSON.data.message?res.responseJSON.data.message:api.Text.parse('save-success'),theme:'relax',layout:'top',type:'success',animation:{open:'animated fadeIn',close:'animated fadeOut'}});setTimeout(function(){document.querySelector('.noty_message').click();},2000);api.Event.trigger(this.props.doc,'TemplateStyleChanged');}else{bootbox.alert(res.responseJSON.data);}}.bind(this),JSON.parse(this.defaultFormData));}var unsaved=this.refs.mountedDOMNode.querySelectorAll('a.toggle-pane.changed');for(var i=0,n=unsaved.length;i<n;i++){var pane=document.getElementById(unsaved[i].href.substr(unsaved[i].href.indexOf('#')+1));if(pane){pane=api.findReactComponent(pane.firstElementChild);if(pane){pane.refs.actions.refs.save.click();}}}document.getElementById('sunfw-save-all').disabled=true;}});var ComponentButtons=extendReactClass('MixinBase',{propTypes:{id:React.PropTypes.string,items:React.PropTypes.array,className:React.PropTypes.string},getDefaultProps:function(){return{id:'',items:[],className:''};},render:function(){if(!this.props.items.length){return null;}return React.createElement('div',{className:this.props.className},this.props.items.map(item=>{if(item instanceof Array){var btns=[];item.map(btn=>{btns.push(React.createElement(ElementButton,{id:btn.id,href:btn.href,type:btn.type,icon:btn.icon,disabled:btn.disabled,className:(btn.className||'')+(btn.menu?' dropdown-toggle dropdown-toggle-split':''),dataToggle:btn.menu?'dropdown':''},api.Text.parse(btn.label)));if(btn.menu){btns.push(React.createElement(ElementMenu,{type:'dropdown',items:btn.menu,className:btn.menuClass}));}});return React.createElement('div',{className:'btn-group mx-2'},btns);}else{return React.createElement(ElementButton,{id:item.id,href:item.href,type:item.type,icon:item.icon,disabled:item.disabled,className:item.className},item.label);}}));}});var ComponentFooter=extendReactClass('MixinBase',{getInitialState:function(){return{credits:{template:{},framework:{}},others:[]};},render:function(){if(!this.state.others.length){return null;}var data=this.props.doc.refs.update?this.props.doc.refs.update.data:null;return React.createElement("div",{className:"sunfw-footer text-center"},React.createElement("span",{className:"footer-template-update sunfw-version-info"},this.state.credits.template.link&&this.state.showChangelogs?React.createElement("a",{href:this.state.credits.template.link,target:"_blank",rel:"noopener noreferrer",className:"link-normal"},this.state.credits.template.name,' ',api.Text.capitalize(api.vWYQrN9u())):React.createElement("a",null,this.state.credits.template.name,' ',api.Text.capitalize(api.vWYQrN9u())),api.uKCTvbAY()&&!api.JVcR77hm()?[' '+'(',React.createElement("a",{href:"javascript:void(0)",onClick:function(){api.w0bj7Dgp('w2b97wVJ','f');}},api.Text.parse('XNqRzhzv')),')']:null,' ',React.createElement("span",{className:"version-footer"},this.state.credits.template.version),data&&data.template.hasUpdate&&this.state.showUpdate?React.createElement("span",{className:"update-available"},React.createElement("a",{href:"#",className:"sunfw-update-link","data-target":"template",onClick:this.props.doc.refs.update.update},React.createElement("i",{className:"fa fa-refresh"}),api.Text.parse('update-to'),' ',React.createElement("span",{className:"sunfw-footer-template-new-version"},data.template.newVersion))):null),' ',React.createElement("span",{className:"footer-framework-update sunfw-version-info"},React.createElement("span",{className:"powered-by"},api.Text.parse('powered-by')),' ',this.state.credits.framework.link&&this.state.showChangelogs?React.createElement("a",{href:this.state.credits.framework.link,target:"_blank",rel:"noopener noreferrer",className:"link-normal sunfw-prd"},this.state.credits.framework.name):React.createElement("a",null,this.state.credits.framework.name),' ',React.createElement("span",{className:"version-footer"},this.state.credits.framework.version),data&&data.framework.hasUpdate&&this.state.showUpdate?React.createElement("span",{className:"update-available"},React.createElement("a",{href:"#",className:"sunfw-update-link","data-target":"framework",onClick:this.props.doc.refs.update.update},React.createElement("i",{className:"fa fa-refresh"}),api.Text.parse('update-to'),' ',React.createElement("span",{className:"sunfw-footer-framework-new-version"},data.framework.newVersion))):null));},componentDidMount:function(){api.__parent__();api.Event.add(this.props.doc,'UpdateDataFetched',this.update);api.Event.add(this.props.doc,'TemplateAdminConfigLoaded',this.update);},componentWillUnmount:function(){api.__parent__();api.Event.remove(this.props.doc,'UpdateDataFetched',this.update);api.Event.remove(this.props.doc,'TemplateAdminConfigLoaded',this.update);},update:function(){this.forceUpdate();}});var ComponentHeader=extendReactClass('MixinBase',{getInitialState:function(){return{logo:{link:'',image:'',title:''},menu:[]};},initConfig:function(config){var self=this;config.menu=function prepareItems(items){for(var i=0;i<items.length;i++){items[i].onClick=self.click.bind(null,items[i]);if(items[i].items){items[i].items=prepareItems(items[i].items);}}return items;}(config.menu);api.__parent__();},render:function(){if(this.state.logo.image==''&&this.state.logo.link==''&&!this.state.menu.length){return null;}if(api.JVcR77hm()){var wQqHpstt=parseInt(api.BrsJ59vQ());if(isNaN(wQqHpstt)){var jhtAeC6Z=new Date(api.nchnGZtU()).getTime();wQqHpstt=Math.ceil((jhtAeC6Z-new Date().getTime())/(24 * 60 * 60 * 1000));}wQqHpstt='<label class="badge badge-'+(wQqHpstt<8?'danger':'warning')+'">'+wQqHpstt+'</label>';}return React.createElement('div',{key:api.Text.toId(api.Js8CnBzZ()?api.vWYQrN9u():api.Text.GmTf5Hzw([102,114,101,101])),className:'sunfw-topbar container-fluid'},React.createElement('div',{className:'d-flex justify-content-between'},React.createElement('div',{className:'text-left'},this.state.logo.image!=''?React.createElement('img',{'class':'logo mr-1',src:this.state.logo.image}):null,this.state.logo.link!=''?React.createElement(ElementLink,{type:'external',href:this.state.logo.link,title:this.state.logo.title,target:'_blank'}):null,this.state.previewLink?React.createElement(ElementLink,{type:'external',href:this.state.previewLink,title:api.Text.parse('preview-layout'),target:'_blank'}):null),React.createElement('div',{className:'col text-center'},api.kUVxNcb8()?[api.Text.parse('AVyacBDn'),' ',React.createElement('a',{href:api.urls.CgZp5GTv,target:'_blank'},api.Text.parse('BcBkJNHJ')),'.']:api.JVcR77hm()?[api.Text.parse(api.Text.parse('zntBTB4M',true).replace('%d',wQqHpstt)),' ',React.createElement('a',{href:api.urls.CgZp5GTv,target:'_blank'},api.Text.parse('BcBkJNHJ')),'.']:api.uKCTvbAY()?[api.Text.parse('y37Rm2cT'),' ',React.createElement('a',{className:'main-color',href:'javascript:void(0)',onClick:function(){api.w0bj7Dgp('w2b97wVJ','h');}},api.Text.parse('learn-more')),'.']:api.DH9X9DKA()?[api.Text.parse('WRJJEdEg'),' ',React.createElement('a',{href:'javascript:void(0)',onClick:function(){api.zWhQng7a();}},api.Text.parse('bMz6gJBY')),'.']:null),React.createElement('div',{className:'text-right'},this.state.menu.length?React.createElement(ElementMenu,{type:'inline',items:this.state.menu,className:'sunfw-top-right-menu'}):null)));},click:function(item){var name,action,label;if(item.target&&item.target.indexOf('#')>-1){name=item.target.replace(/#/g,'').replace(/\s*,\s+/g,'-');}else if(item.id){name=item.id;}else{name=item.icon;}switch(name){case 'data-sample-data':action='Data';label='Sample Data';break;case 'data-maintenance':action='Data';label='Maintenance';break;case 'global-parameters-user-account':action='Settings';label='User Account';break;case 'about':action='About';break;case 'sunfw-learn-more':action='Help';label='Get Started';break;case 'book':action='Help';label='Documentation';break;case 'comment-o':action='Help';label='Support Forum';break;}api.b3repxvd.h9VSyDAP('Top Menu',action,label);}});var ComponentUpdate=extendReactClass('MixinBase',{getInitialState:function(){this.data={framework:{hasUpdate:false},template:{hasUpdate:false}};return{url:'',modalTitle:{framework:'',template:''}};},componentDidUpdate:function(){api.__parent__();if(this.state.url!=''&&!this.fetchedData){api.Ajax.request(this.state.url+'action=checkUpdate',function(req){if(req.responseJSON&&req.responseJSON.type=='success'){this.data=req.responseJSON.data;api.Event.trigger(this.props.doc,'UpdateDataFetched');}}.bind(this));this.fetchedData=true;}},render:function(){return React.createElement(ElementModal,{id:this.props.id,ref:'modal',type:'ajax',buttons:'disabled',centralize:false});},update:function(event){if(typeof event=='object'&&event.target.getAttribute('data-target')){this.target=event.target.getAttribute('data-target');}if(!this.target){this.target='framework';}if(this.data[this.target].hasUpdate){var action=typeof event=='object'?'loadConfirmScreen':event;if(typeof this[action]=='function'){this.refs.modal.setState({show:true,title:this.state.modalTitle[this.target],className:'installation-modal'});this.container=this.refs.modal.refs.mountedDOMNode.querySelector('.modal-body');ReactDOM.render(React.createElement(ElementLoading,{className:'inline'}),this.container);this[action]();}}},loadConfirmScreen:function(){api.Ajax.request(this.state.url+'action=confirm&target='+this.target,function(req){var response=req.responseJSON;if(response.data==null){return this.update('loadInstallScreen');}this.container.innerHTML=response.data;setTimeout(function(){var customerInfoFields=this.container.querySelectorAll('input[name="username"],input[name="password"]'),confirmUpdateButton=this.container.querySelector('#btn-confirm-update'),updateBothButton=this.container.querySelector('#btn-confirm-update-both'),cancelUpdateSetToken=this.container.querySelector('#btn-cancel-update-open-token-page');if(customerInfoFields.length==0){if(confirmUpdateButton){api.Event.add(confirmUpdateButton,'click',function(event){event.preventDefault();confirmUpdateButton.disabled=true;this.update('loadInstallScreen');}.bind(this));}}else{for(var i=0,n=customerInfoFields.length;i<n;i++){api.Event.add(customerInfoFields[i],'keyup',function(event){this.customerInfo={username:this.container.querySelector('input[name="username"]').value,password:this.container.querySelector('input[name="password"]').value};if(this.customerInfo.username!=''&&this.customerInfo.password!=''){confirmUpdateButton.disabled=false;if(event.keyCode==13){confirmUpdateButton.click();}}else{confirmUpdateButton.disabled=true;}}.bind(this));}api.Event.add(confirmUpdateButton,'click',function(event){event.preventDefault();confirmUpdateButton.disabled=false;api.Ajax.request(this.state.url+'action=confirm',function(req){var response=this.parseResponse(req);if(response.type=='success'){this.update('loadInstallScreen');}else{alert(response.data);}}.bind(this),this.customerInfo);}.bind(this));}if(updateBothButton){api.Event.add(updateBothButton,'click',function(event){event.preventDefault();this.target='template';this.update('loadConfirmScreen');}.bind(this));}if(cancelUpdateSetToken){api.Event.add(cancelUpdateSetToken,'click',function(event){event.preventDefault();this.refs.modal.close();document.querySelector('a[href="#token-key"]').click();}.bind(this));}api.Event.add(this.container.querySelector('#btn-cancel-update'),'click',function(event){event.preventDefault();this.refs.modal.close();}.bind(this));}.bind(this),10);}.bind(this));api.b3repxvd.h9VSyDAP('Update','Update '+api.Text.capitalize(this.target)+':'+' '+'Started');},loadInstallScreen:function(){api.Ajax.request(this.state.url+'action=install&target='+this.target,function(req){var response=req.responseJSON;this.container.innerHTML=response.data;setTimeout(function(){this.btnFinish=this.container.querySelector('#btn-finish-install');api.Event.add(this.btnFinish,'click',function(event){event.preventDefault();this.finishUpdate();}.bind(this));if(this.target=='framework'){this.startInstallFramework();}else{this.downloadPackage();}}.bind(this),10);}.bind(this));},startInstallFramework:function(){var downloadPackage=this.container.querySelector('li#sunfw-download-package'),downloadStatus=downloadPackage.querySelector('.status'),installUpdate=this.container.querySelector('li#sunfw-install-update'),installStatus=installUpdate.querySelector('.status'),processingInstall=this.container.querySelector('.processing-installation'),finishedInstall=this.container.querySelector('.finished-installation');api.Ajax.downloadFile(this.state.url+'action=downloadFramework',downloadPackage.querySelector('.progress'),function(req){var response=req.responseJSON;if(response.type=='success'){downloadStatus.className+=' fa-check-circle-o text-success';installUpdate.classList.remove('hidden');installStatus.classList.add('fa-circle-o-notch');installStatus.classList.add('fa-spin');api.Ajax.request(this.state.url+'action=installFramework',function(req){var response=req.responseJSON;installStatus.classList.remove('fa-spin');installStatus.classList.remove('fa-circle-o-notch');if(response.type=='success'){installStatus.className+=' fa-check-circle-o text-success';processingInstall.classList.add('hidden');finishedInstall.classList.remove('hidden');api.b3repxvd.h9VSyDAP('Update','Update Framework:'+' '+'Finished');}else{var alert=installUpdate.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');installStatus.className+=' fa-times-circle-o text-danger';}this.stopUpdate();}.bind(this));}else{var alert=downloadPackage.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');downloadStatus.className+=' fa-times-circle-o text-danger';}}.bind(this));},downloadPackage:function(){var liDownload=this.container.querySelector('#sunfw-download-package'),spanStatus=liDownload.querySelector('.status');api.Ajax.downloadFile(this.state.url+'action=download',liDownload.querySelector('.progress'),function(req){var response=req.responseJSON;if(response.type=='error'){var alert=liDownload.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');spanStatus.className+=' fa-times-circle-o text-danger';this.stopUpdate();}else{spanStatus.className+=' fa-check-circle-o text-success';this.checkFilesModification();}}.bind(this),this.customerInfo);},checkFilesModification:function(){var liCreateList=this.container.querySelector('#sunfw-backup-modified-files'),spanStatus=liCreateList.querySelector('.status'),putOnHold=this.container.querySelector('#sunfw-put-update-on-hold');liCreateList.classList.remove('hidden');spanStatus.classList.add('fa-circle-o-notch');spanStatus.classList.add('fa-spin');api.Ajax.request(this.state.url+'action=checkBeforeUpdate',function(req){var response=req.responseJSON;spanStatus.classList.remove('fa-spin');spanStatus.classList.remove('fa-circle-o-notch');if(response.type=='success'){spanStatus.className+=' fa-check-circle-o text-success';if(response.data.hasModification==true){this.hasModification=true;var warnDownloadBackup=liCreateList.querySelector('#sunfw-download-backup-of-modified-files');warnDownloadBackup.classList.remove('hidden');api.Event.add(putOnHold.querySelector('#btn-continue-install'),'click',function(event){event.preventDefault();warnDownloadBackup.classList.add('hidden');putOnHold.classList.add('hidden');putOnHold.parentNode.parentNode.classList.add('hidden');this.prepareUpdate();}.bind(this));api.Event.add(putOnHold.querySelector('#btn-cancel-install'),'click',function(event){event.preventDefault();this.finishUpdate();}.bind(this));putOnHold.classList.remove('hidden');putOnHold.parentNode.parentNode.classList.remove('hidden');}else{this.prepareUpdate();}}else{var alert=liCreateList.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');spanStatus.className+=' fa-times-circle-o text-danger';this.stopUpdate();}}.bind(this));},prepareUpdate:function(){if(this.data.framework.hasUpdate){var downloadPackage=this.container.querySelector('li#sunfw-download-framework'),downloadStatus=downloadPackage.querySelector('.status'),installUpdate=this.container.querySelector('li#sunfw-install-framework'),installStatus=installUpdate.querySelector('.status');downloadPackage.classList.remove('hidden');api.Ajax.downloadFile(this.state.url+'action=downloadFramework',downloadPackage.querySelector('.progress'),function(req){var response=req.responseJSON;if(response.type=='success'){downloadStatus.className+=' fa-check-circle-o text-success';installUpdate.classList.remove('hidden');installStatus.classList.add('fa-circle-o-notch');installStatus.classList.add('fa-spin');api.Ajax.request(this.state.url+'action=installFramework',function(req){var response=req.responseJSON;installStatus.classList.remove('fa-spin');installStatus.classList.remove('fa-circle-o-notch');if(response.type=='success'){installStatus.className+=' fa-check-circle-o text-success';this.installUpdate();}else{var alert=installUpdate.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');installStatus.className+=' fa-times-circle-o text-danger';}}.bind(this));}else{var alert=downloadPackage.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');downloadStatus.className+=' fa-times-circle-o text-danger';}}.bind(this));}else{this.installUpdate();}},installUpdate:function(){var liInstall=this.container.querySelector('#sunfw-install-update'),spanStatus=liInstall.querySelector('.status'),processingInstall=this.container.querySelector('.processing-installation'),finishedInstall=this.container.querySelector('.finished-installation');liInstall.classList.remove('hidden');spanStatus.classList.add('fa-circle-o-notch');spanStatus.classList.add('fa-spin');api.Ajax.request(this.state.url+'action=installPackage',function(req){var response=req.responseJSON;if(response.type=='success'){if(this.hasModification){finishedInstall.querySelector('#sunfw-backup-information').classList.remove('hidden');}api.Ajax.request(this.state.url+'action=compileCss',function(req){var response=req.responseJSON;spanStatus.classList.remove('fa-spin');spanStatus.classList.remove('fa-circle-o-notch');spanStatus.className+=' fa-check-circle-o text-success';processingInstall.classList.add('hidden');finishedInstall.classList.remove('hidden');this.stopUpdate();}.bind(this));api.b3repxvd.h9VSyDAP('Update','Update Template:'+' '+'Finished');}else{spanStatus.classList.remove('fa-spin');spanStatus.classList.remove('fa-circle-o-notch');var alert=liInstall.querySelector('.alert');alert.innerHTML=response.data;alert.classList.remove('hidden');spanStatus.className+=' fa-times-circle-o text-danger';this.stopUpdate();}}.bind(this));},stopUpdate:function(){this.btnFinish.classList.remove('hidden');var parent=this.btnFinish.parentNode;while(!parent.classList.contains('hidden')&&parent.nodeName!='BODY'){parent=parent.parentNode;}parent.classList.remove('hidden');},finishUpdate:function(){this.btnFinish.disabled=true;this.btnFinish.innerHTML=api.Text.parse('please-wait');this.btnFinish.style.cursor='wait';window.location.reload();}});var PaneMixinBase=api.PaneMixinBase=React.createClass({displayName:'PaneMixinBase',componentWillMount:function(){this.migrateParentEditorRef();var state=this.migratePropsToState();if(state){this.setState(state);}},render:function(){return null;},componentDidMount:function(){if(typeof this.initActions=='function'){this.initActions();}},componentWillReceiveProps:function(newProps){var state=this.migratePropsToState(newProps);if(state){this.setState(state);}},componentWillUpdate:function(newProps,newState){this.migrateParentEditorRef();},componentDidUpdate:function(){if(typeof this.initActions=='function'){this.initActions();}},migrateParentEditorRef:function(){if(this.props.editor){this.editor=this.props.editor;delete this.props.editor;}if(this.props.parent){this.parent=this.props.parent;delete this.props.parent;}},migratePropsToState:function(props){var props=props||this.props,state;if(props.data){for(var p in props.data){if(!this.state||this.state[p]!=props.data[p]){state=state||{};state[p]=props.data[p];}}}return state;}});var PaneMixinAction=api.PaneMixinAction=extendReactClass('PaneMixinBase',{initActions:function(){var btn=this.refs.save.parentNode.classList.contains('btn-group')?this.refs.save.parentNode:this.refs.save;if(api.jGPQpB1n(this.editor.props.id)){if(!jQuery(btn).data('bs.tooltip')){jQuery(btn).tooltip({html:true,content:api.Text.parse('Q3TX2PUM'),trigger:'hover',placement:'left',container:'body'});}}else if(jQuery(btn).data('bs.tooltip')){jQuery(btn).tooltip('dispose');}var tab=document.querySelector('a[href="#'+this.editor.props.id+'"]'),saveAllButton=document.getElementById('sunfw-save-all');if(this.editor.state.changed==true){if(!api.jGPQpB1n(this.editor.props.id)){if(tab&&tab.textContent.indexOf(' *')<0){tab.classList.add('changed');if(tab.parentNode.parentNode.classList.contains('dropdown-menu')){if(tab.parentNode.parentNode.previousElementSibling.textContent.indexOf(' *')<0){tab.parentNode.parentNode.previousElementSibling.textContent+=' *';}}else{tab.textContent+=' *';}}if(saveAllButton){saveAllButton.disabled=false;}}}else if(tab){tab.classList.remove('changed');if(tab.parentNode.parentNode.classList.contains('dropdown-menu')){tab.parentNode.parentNode.previousElementSibling.textContent=tab.parentNode.parentNode.previousElementSibling.textContent.replace(' *','');}else{tab.textContent=tab.textContent.replace(' *','');}}}});var PaneMixinDraggable=api.PaneMixinDraggable={dragStart:function(event){event.dataTransfer.setData('element',this);this.editor.state.dataTransfer=this;if(this.handleDragStart){this.handleDragStart(event);}},dragEnd:function(event){this.editor.refs.marker.classList.remove('drop-target');}};var PaneMixinDroppable=api.PaneMixinDroppable={dragOver:function(event){var that=this.editor.state.dataTransfer;if(typeof that=='object'&&event.target==that.refs.wrapper){return;}if(typeof that=='object'&&this.props.view!=that.props.view){return;}var droppable=event.target;while(!droppable.classList.contains('droppable')&&droppable.nodeName!='BODY'){droppable=droppable.parentNode;}if(droppable.nodeName=='BODY'){return;}var parent=droppable.parentNode;while(!parent.classList.contains('offcanvas')&&parent.nodeName!='BODY'){parent=parent.parentNode;}if(parent.classList.contains('offcanvas')&&parent.parentNode.className.indexOf('open-')<0){return;}var type=that.getItemType?that.getItemType(that):'item';if(type&&!droppable.classList.contains('accept-'+type)){return;}if(droppable.children.length&&droppable.children[0].className.match(/col-?(lg|md|sm|xs)?-\d+/)&&(this.editor.currentScreen=='xs'||droppable.children.length==12)){return;}var marker=this.editor.refs.marker,scrollT=document.body.scrollTop||document.documentElement.scrollTop,scrollL=document.body.scrollLeft||document.documentElement.scrollLeft,rect,index,targetItem,bounce;if(event.target.classList.contains('draggable-item')){index=event.target.getAttribute('data-index');rect=event.target.getBoundingClientRect();if(event.target.className.match(/col-?(lg|md|sm|xs)?-\d+/)){marker.classList.add('vertical-marker');marker.classList.remove('horizontal-marker');marker.style.top=rect.top+scrollT+'px';marker.style.height=rect.height+'px';if(typeof that=='object'&&event.target.nextElementSibling==that.refs.wrapper||event.clientX-rect.left<rect.right-event.clientX){if(event.target.previousElementSibling){bounce=event.target.previousElementSibling.getBoundingClientRect().right;}else{bounce=event.target.parentNode.getBoundingClientRect().left;}marker.style.left=rect.left-(rect.left-bounce)/2-marker.offsetWidth/2+scrollL+'px';event.target.parentNode.setAttribute('drop-index',index);}else if(typeof that=='object'&&event.target.previousElementSibling==that.refs.wrapper||event.clientX-rect.left>rect.right-event.clientX){if(event.target.nextElementSibling){bounce=event.target.nextElementSibling.getBoundingClientRect().left;}else{bounce=event.target.parentNode.getBoundingClientRect().right;}marker.style.left=rect.right+(bounce-rect.right)/2-marker.offsetWidth/2+scrollL+'px';event.target.parentNode.setAttribute('drop-index',parseInt(index)+1);}else{return;}}else{marker.classList.add('horizontal-marker');marker.classList.remove('vertical-marker');marker.style.left=rect.left+scrollL+'px';marker.style.width=rect.width+'px';if(typeof that=='object'&&event.target.nextElementSibling==that.refs.wrapper||event.clientY-rect.top<rect.bottom-event.clientY){if(event.target.previousElementSibling){bounce=event.target.previousElementSibling.getBoundingClientRect().bottom;}else{bounce=event.target.parentNode.getBoundingClientRect().top;}marker.style.top=rect.top-(rect.top-bounce)/2-marker.offsetHeight/2+scrollT+'px';event.target.parentNode.setAttribute('drop-index',index);}else if(typeof that=='object'&&event.target.previousElementSibling==that.refs.wrapper||event.clientY-rect.top>rect.bottom-event.clientY){if(event.target.nextElementSibling){bounce=event.target.nextElementSibling.getBoundingClientRect().top;}else{if(event.target.previousElementSibling){bounce=event.target.previousElementSibling.getBoundingClientRect().bottom;}else{bounce=droppable.getBoundingClientRect().top;}bounce=rect.bottom+(rect.top-bounce);}marker.style.top=rect.bottom+(bounce-rect.bottom)/2-marker.offsetHeight/2+scrollT+'px';event.target.parentNode.setAttribute('drop-index',parseInt(index)+1);}else{return;}}}else{if(!droppable.children.length){rect=droppable.getBoundingClientRect();bounce=window.getComputedStyle(droppable);bounce={top:parseInt(bounce.getPropertyValue('padding-top')),left:parseInt(bounce.getPropertyValue('padding-left')),right:parseInt(bounce.getPropertyValue('padding-right'))};marker.classList.add('horizontal-marker');marker.classList.remove('vertical-marker');marker.style.top=rect.top+bounce.top+scrollT+'px';marker.style.left=rect.left+bounce.left+scrollL+'px';marker.style.width=rect.width-bounce.left-bounce.right+'px';index=0;}else if(droppable.children[0].className.match(/col-?(lg|md|sm|xs)?-\d+/)){for(index=0;index<droppable.children.length;index++){rect=droppable.children[index].getBoundingClientRect();if(event.clientX<rect.left){targetItem=droppable.children[index];if(index>0){var distance=rect.left-event.clientX;rect=droppable.children[index-1].getBoundingClientRect();if(event.clientX-rect.left<distance){targetItem=droppable.children[index-1];index--;}else{rect=droppable.children[index].getBoundingClientRect();}}break;}}marker.classList.add('vertical-marker');marker.classList.remove('horizontal-marker');marker.style.top=rect.top+scrollT+'px';marker.style.height=rect.height+'px';if(targetItem){if(targetItem.previousElementSibling){bounce=targetItem.previousElementSibling.getBoundingClientRect().right;}else{bounce=droppable.getBoundingClientRect().left;}marker.style.left=rect.left-(rect.left-bounce)/2-marker.offsetWidth/2+scrollL+'px';}else{if(event.clientX-rect.left<rect.right-event.clientX){index--;bounce=index>0?droppable.children[index-1].getBoundingClientRect().right:droppable.getBoundingClientRect().left;marker.style.left=rect.left-(rect.left-bounce)/2-marker.offsetWidth/2+scrollL+'px';}else{bounce=droppable.getBoundingClientRect().right;marker.style.left=rect.right+(bounce-rect.right)/2-marker.offsetWidth/2+scrollL+'px';}}}else{for(index=0;index<droppable.children.length;index++){rect=droppable.children[index].getBoundingClientRect();if(event.clientY<rect.top){targetItem=droppable.children[index];if(index>0){var distance=rect.top-event.clientY;rect=droppable.children[index-1].getBoundingClientRect();if(event.clientY-rect.top<distance){targetItem=droppable.children[index-1];index--;}else{rect=droppable.children[index].getBoundingClientRect();}}break;}}marker.classList.add('horizontal-marker');marker.classList.remove('vertical-marker');marker.style.left=rect.left+scrollL+'px';marker.style.width=rect.width+'px';if(targetItem){if(targetItem.previousElementSibling){bounce=targetItem.previousElementSibling.getBoundingClientRect().bottom;}else{bounce=droppable.getBoundingClientRect().top;}marker.style.top=rect.top-(rect.top-bounce)/2-marker.offsetHeight/2+scrollT+'px';}else{if(event.clientY-rect.top<rect.bottom-event.clientY){index--;bounce=index>0?droppable.children[index-1].getBoundingClientRect().bottom:droppable.getBoundingClientRect().top;marker.style.top=rect.top-(rect.top-bounce)/2-marker.offsetHeight/2+scrollT+'px';}else{rect=droppable.children[droppable.children.length-1].getBoundingClientRect();if(droppable.children.length-1>0){bounce=droppable.children[droppable.children.length-2].getBoundingClientRect().bottom;}else{bounce=droppable.getBoundingClientRect().top;}bounce=rect.bottom+(rect.top-bounce);marker.style.top=rect.bottom+(bounce-rect.bottom)/2-marker.offsetHeight/2+scrollT+'px';}}}droppable.setAttribute('drop-index',index);}marker.classList.add('drop-target');event.preventDefault();return event.stopPropagation();},drop:function(event){event.preventDefault();event.stopPropagation();this.editor.isMouseDown=false;this.editor.refs.marker.classList.remove('drop-target');var droppable=event.target;while(!droppable.classList.contains('droppable')&&droppable.nodeName!='BODY'){droppable=droppable.parentNode;}if(droppable.nodeName=='BODY'){return;}var that=this.editor.state.dataTransfer,type=that.getItemType?that.getItemType():'item';delete this.editor.state.dataTransfer;if(!droppable.classList.contains('accept-'+type)){return;}var targetIndex=parseInt(droppable.getAttribute('drop-index'));if(typeof that=='object'&&this==that.parent){if(targetIndex==that.props.index||targetIndex==that.props.index+1){return;}}if(this.handleDrop){var handleDrop=function(){this.handleDrop(droppable,targetIndex,that,type);if(typeof that=='string'&&this.editor.config.items[that]){if(this.editor.config.items[that].settings['one-time-item']){this.editor.refs.items.refs['item_type_'+that].forceUpdate();}}}.bind(this);if(typeof that=='string'&&this.editor.config.items[that]){return api.Item.loadSettingsForm(this.editor,that,function(){if(this.editor.config.items[that].settings['one-time-item']){if(api.Item.isUsed(this.editor,that)){return bootbox.alert(api.Text.parse('one-time-item').replace('%ITEM%',that.replace('-',' ')));}}handleDrop();}.bind(this));}handleDrop();}}};var PaneMixinEditor=api.PaneMixinEditor=extendReactClass('PaneMixinBase',{propTypes:{id:React.PropTypes.string,url:React.PropTypes.string,cfg:React.PropTypes.object},initConfig:function(config){if(config.data){for(var p in this.current){if(config.data.hasOwnProperty(p)){this.current[p]=config.data[p];delete config.data[p];}}this.data=config.data;delete config.data;}if(config.inputs){for(var input in config.inputs){api.inputs[input]=config.inputs[input];}delete config.inputs;}if(config.textMapping){api.Text.setData(this,config.textMapping);delete config.textMapping;}this.config=config;this.forceUpdate();if(this.config.items){this.selectItem(this.current?this.current.editing:'');}if(this.preloadAssets){this.preloadAssets();}setTimeout(function(){api.Event.trigger(this.props.doc,api.Text.toCamelCase(this.props.id,true)+'Rendered');}.bind(this),1);},preloadAssets:function(){if(typeof this.config.settings=='string'){api.Ajax.request(this.config.settings,function(req){this.config.settings=req.responseJSON;this.refs.settings.setState({rel:this,form:this.config.settings,values:this.getData()});if(['cookie-law','social-share','commenting','custom-404'].indexOf(this.props.id)>-1&&!this._listened_FormChanged){api.Event.add(this.refs.settings,'FormChanged',function(event){if(event.changedElement){var action='Edit'+' '+api.b3repxvd.tBJWZK17(this.props.id),label;if(!event.changedElement.props.control.label||event.changedElement.props.control.label==''){if(this.props.id=='cookie-law'&&event.changedElement.props.setting=='message'){label='Text';}if(!label){label=api.b3repxvd.tBJWZK17(event.changedElement.props.setting);}}else{if(this.props.id=='social-share'){switch(event.changedElement.props.control.label){case 'social-share-text':label='Text';break;case 'social-share-buttons':label='Social Buttons';break;case 'social-share-buttons-position':label='Buttons Position';break;case 'social-share-category':label='Category';break;}}else if(this.props.id=='commenting'){switch(event.changedElement.props.control.label){case 'commenting-disqus-subdomain':label='Disqus Subdomain'+' '+'(Shortname)';break;case 'commenting-facebook-app-id':label='Facebook App ID';break;case 'commenting-intensedebate-site-account':label='IntenseDebate Site Account';break;case 'commenting-show-text':label='Show Text';break;case 'commenting-show-counter':label='Show Comment Number';break;case 'commenting-category':label='Category';break;}}else if(this.props.id=='custom-404'){switch(event.changedElement.props.control.label){case 'custom-404-article':label='Destination Article';break;}}if(!label){label=api.b3repxvd.tBJWZK17(event.changedElement.props.control.label);}}api.b3repxvd.h9VSyDAP('Extras',action,label);}}.bind(this));this._listened_FormChanged=true;}}.bind(this));}},componentWillMount:function(){api.__parent__();if(this.props.cfg){this.initConfig(this.props.cfg);}else if(this.props.url&&this.props.url!=''){api.Ajax.request(this.props.url,function(req){if(req.responseJSON&&req.responseJSON.data){this.initConfig(req.responseJSON.data);}}.bind(this));}},componentDidMount:function(){api.__parent__();api.Event.add(document,'mousedown',this.mousedown);api.Event.add(document,'mouseup',this.mouseup);api.Event.add(document,'keydown',this.keydown);api.Event.add(document,'keyup',this.keyup);},componentDidUpdate:function(){api.__parent__();api.Event.trigger(window,'resize');},componentWillUnmount:function(){api.Event.remove(document,'mousedown',this.mousedown);api.Event.remove(document,'mouseup',this.mouseup);api.Event.remove(document,'keydown',this.keydown);api.Event.remove(document,'keyup',this.keyup);},mousedown:function(event){this.isMouseDown=true;},mouseup:function(event){this.isMouseDown=false;},keydown:function(event){var shiftKey=16,ctrlKey=17,cmdKey=91;if(event.keyCode==shiftKey){this.isShiftKeyDown=true;}else if(event.keyCode==ctrlKey||event.keyCode==cmdKey){this.isControlKeyDown=true;}var backspaceKey=8,deleteKey=46,zKey=90;if(this.refs.wrapper&&event.target==document.body){var pane=this.refs.wrapper.parentNode;if(!pane.classList.contains('tab-pane')&&pane.nodeName!='BODY'){pane=pane.parentNode;}if(!pane.classList.contains('active')){return;}switch(event.keyCode){case backspaceKey:case deleteKey:if(this.config.items&&this.current.editing!=''){if(!this.isControlKeyDown&&!this.isShiftKeyDown&&!event.altKey&&!event.metaKey){var ref=this.refs[this.current.editing];if(ref&&ref.deleteItem){event.preventDefault();ref.deleteItem();}}}break;case zKey:if(this.refs.activity){if(this.isControlKeyDown&&this.isShiftKeyDown){event.preventDefault();this.refs.activity.redo();}else if(this.isControlKeyDown){event.preventDefault();this.refs.activity.undo();}}break;}}},keyup:function(event){var shiftKey=16,ctrlKey=17,cmdKey=91;if(event.keyCode==shiftKey){this.isShiftKeyDown=false;}else if(event.keyCode==ctrlKey||event.keyCode==cmdKey){this.isControlKeyDown=false;}},dragOver:function(event){this.refs.marker.classList.remove('drop-target');},getData:function(){var data=this.data?JSON.parse(JSON.stringify(this.data)):{};var defaults=this.getDefaultData?this.getDefaultData():{};for(var p in defaults){if(defaults.hasOwnProperty(p)&&data[p]===undefined){data[p]=defaults[p];}}return data;},setData:function(data,skip_logging_activity){this.data=data;if(this.refs.activity){this.log_activity=skip_logging_activity?false:true;this.refs.activity.forceUpdate();}this.state.changed=true;if(this.refs.actions&&!api.jGPQpB1n(this.props.id)){this.refs.actions.forceUpdate();}},selectItem:function(item,skip_logging_activity){if(this.handleSelectItem){setTimeout(function(){this.handleSelectItem(item);if(this.refs.activity&&!skip_logging_activity){this.refs.activity.forceUpdate();}}.bind(this),5);}},showSettings:function(ref,type,data,toolbar,state){if(this.refs.settings){var form=(this.config.items?this.config.items[type]||this.config:this.config).settings;var state=state||{};state.rel=ref;state.form=typeof form=='object'?this.getItemForm?this.getItemForm(ref):form:form;state.values=data;state.toolbar=toolbar;this.refs.settings.setState(state);if(typeof form=='string'){api.Ajax.request(form,function(req){if(req.responseJSON){(this.config.items?this.config.items[type]||this.config:this.config).settings=req.responseJSON;form=(this.config.items?this.config.items[type]||this.config:this.config).settings;this.refs.settings.setState({form:typeof form=='object'?this.getItemForm?this.getItemForm(ref):form:form});}}.bind(this));}if(!this._listened_TemplateAdminConfigLoadedEvent){api.Event.add(this.props.doc,'UserAccountSwitched',function(){if(this.l&&this.l[this.current?this.current.editing:'e']==api.vWYQrN9u()){return;}this.l=this.l||{};this.l[this.current?this.current.editing:'e']=api.vWYQrN9u();var defaults={};for(var p in this.refs.settings.state.values){var cyy6yS9a=api.Rc4GEtCP(p);if(cyy6yS9a!==false){var controls=this.refs.settings.refs.mountedDOMNode.querySelectorAll('[name^="'+p+'"]');if(controls.length){for(var i=0;i<controls.length;i++){var row,title,label;if(cyy6yS9a!=''){row=this.refs.settings.refs.mountedDOMNode.querySelector('.'+cyy6yS9a);if(row){title=row.querySelector('.jsn-card__title h3');label=title.querySelector('.label-danger');}}var control=api.findReactComponent(controls[i]);if(api.uKCTvbAY()&&title&&!label){label=document.createElement('span');label.className='badge badge-danger';label.textContent=api.Text.parse('Sbrr2pJQ');title.appendChild(label);}else if(!api.uKCTvbAY()&&title&&label){title.removeChild(label);}var v=control.props.control['default'];if(api.bqZHB4bn.PwjNzhrn(control.props.setting)!==undefined){v=api.bqZHB4bn.PwjNzhrn(control.props.setting);}if(v!==undefined&&v!==control.state.value){defaults[control.props.setting]=v;this.refineSettingsTimer&&clearTimeout(this.refineSettingsTimer);this.refineSettingsTimer=setTimeout(function(form,defaults){var forceSave=false;for(var p in defaults){if(defaults.hasOwnProperty(p)){api.b3repxvd.skipPosting=true;form.updateState(p,defaults[p]);forceSave=forceSave||true;}}forceSave&&this.save();}.bind(this,control.props.form,defaults),100);}}}}}}.bind(this));this._listened_TemplateAdminConfigLoadedEvent=true;}}},saveSettings:function(settings){var data=this.getData();for(var p in settings){data[p]=settings[p];}this.setData(data);this.refs.workspace.forceUpdate();},getItemSettings:function(item){if(this.handleGetItemSettings){return this.handleGetItemSettings.apply(this,arguments);}},saveItemSettings:function(item,values){if(this.handleSaveItemSettings){this.handleSaveItemSettings(item,values);}},save:function(custom,name){if(api.jGPQpB1n(this.props.id)){return api.w0bj7Dgp(api.Text.GmTf5Hzw([112,97,110,101,45])+this.props.id);}var s=arguments.length==0?true:false;if(!s){if(!api.dD3kkvvG()){return api.w0bj7Dgp('TQRUYEYz');}if((!custom||!name||name=='')&&(this.refs.actions.refs.save.disabled||this.refs.actions.refs.save.getAttribute('disabled')!==null)){return;}this.refs.actions.refs.save._origHTML=this.refs.actions.refs.save._origHTML||this.refs.actions.refs.save.innerHTML;this.refs.actions.refs.save.innerHTML='<i class="icon-apply icon-white margin-right-5"></i>'+api.Text.parse('saving-data');if(this.refs.actions.refs.save.disabled!==undefined){this.refs.actions.refs.save.disabled=true;}var tab=document.querySelector('a[href="#'+this.props.id+'"]');if(tab.parentNode.parentNode.classList.contains('dropdown-menu')){tab=tab.parentNode.parentNode.previousElementSibling;}if(tab){var loading=document.createElement('span');loading.className='sunfw-loading';tab.appendChild(loading);}if(api.uKCTvbAY()){for(var p in this.data){if(api.Rc4GEtCP(p)){if(api.bqZHB4bn.PwjNzhrn(p)!==undefined){this.data[p]=api.bqZHB4bn.PwjNzhrn(p);}else{delete this.data[p];}}}for(var p in this.data.settings){if(api.Rc4GEtCP(p)){if(api.bqZHB4bn.PwjNzhrn(p)!==undefined){this.data.settings[p]=api.bqZHB4bn.PwjNzhrn(p);}else{delete this.data.settings[p];}}}}}var callback=function(res){var response=res.responseJSON||res;if(response.type=='success'){if(!s){noty({text:response.data&&response.data.message?response.data.message:api.Text.parse('save-success'),theme:'relax',layout:'top',type:'success',animation:{open:'animated fadeIn',close:'animated fadeOut'}});setTimeout(function(){document.querySelector('.noty_message').click();},2000);}this.state.changed=false;if(this.refs.activity){this.refs.activity.reset();}if(this.refs.actions){this.refs.actions.forceUpdate();}api.Event.trigger(document,api.Text.toCamelCase(this.props.id,true)+'Saved');}else{if(!s){bootbox.alert(response.data);}}if(!s){this.refs.actions.refs.save.innerHTML=this.refs.actions.refs.save._origHTML;try{tab.removeChild(loading);}catch(e){}}}.bind(this);if(this.handleSave){var args=[];for(var i=0,n=arguments.length;i<n;i++){args[i]=arguments[i];}args.push(callback);this.handleSave.apply(this,args);}else{var data=this.getData();if(this.current){for(var p in this.current){if(this.current.hasOwnProperty(p)){data[p]=this.current[p];}}}api.Ajax.request(this.config.url+'&action=save',callback,{data:JSON.stringify(data)});}}});var PaneMixinItem=api.PaneMixinItem={mouseover:function(event){if(!this.editor.isMouseDown){event.stopPropagation();(this.refs.wrapper||event.target).classList.add('mouseover');}},mouseout:function(event){if(!this.editor.isMouseDown){event.stopPropagation();(this.refs.wrapper||event.target).classList.remove('mouseover');}}};var PaneActions=api.PaneActions=extendReactClass('PaneMixinAction',{render:function(){return React.createElement("a",{ref:"save",href:"javascript:void(0)",onClick:this.editor.save,disabled:api.jGPQpB1n(this.editor.props.id)?true:!this.editor.state.changed,className:"btn btn-success"},React.createElement("i",{className:"fa fa-pencil-square-o mr-1"}),api.Text.parse('save-'+this.editor.props.id));}});var PaneActivity=api.PaneActivity=extendReactClass('PaneMixinBase',{getInitialState:function(){return{activities:[],index:-1,count:0};},render:function(){return React.createElement("div",{className:"btn-group sunfw-undo-repeat"},React.createElement("button",{ref:"undo",type:"button",disabled:"disabled",className:"btn btn-default",title:this.state.index+' '+'changed'},React.createElement("i",{className:"fa fa-undo"})),React.createElement("button",{ref:"redo",type:"button",disabled:"disabled",className:"btn btn-default",title:this.state.activities.length-this.state.index-1+' '+'changed'},React.createElement("i",{className:"fa fa-repeat"})));},componentDidMount:function(){this.state.activities[++this.state.index]={data:this.editor.getData(),state:JSON.parse(JSON.stringify(this.editor.state)),current:JSON.parse(JSON.stringify(this.editor.current))};api.Event.add(this.refs.undo,'click',this.undo);api.Event.add(this.refs.redo,'click',this.redo);},componentDidUpdate:function(){if(!this.undoing&&!this.redoing){var current={data:this.editor.getData(),state:JSON.parse(JSON.stringify(this.editor.state)),current:JSON.parse(JSON.stringify(this.editor.current))};if(this.editor.log_activity==true){var last=this.state.activities[this.state.index],changed=!last;if(last){for(var p in current.data){if(current.data.hasOwnProperty(p)){if(typeof current.data[p]=='object'){if(JSON.stringify(current.data[p])!=JSON.stringify(last.data[p])){changed=true;break;}}else if(current.data[p]!=last.data[p]){changed=true;break;}}}}if(changed){if(this.state.index+1<this.state.activities.length){this.state.activities.splice(this.state.index+1,this.state.activities.length-this.state.index-1);}this.state.activities.push(current);this.state.index++;}else{this.state.activities[this.state.index]=current;}}else{this.state.activities[this.state.index]=current;}}else{if(this.undoing){this.undoing=false;}else{this.redoing=false;}}this.refs.undo.disabled=!(this.state.index>0);this.refs.redo.disabled=!(this.state.index+1<this.state.activities.length);},componentWillUnmount:function(){api.Event.remove(this.refs.undo,'click',this.undo);api.Event.remove(this.refs.redo,'click',this.redo);},undo:function(){if(!this.refs.undo.disabled){this.undoing=true;this.state.index--;var activity=JSON.parse(JSON.stringify(this.state.activities[this.state.index]));if(this.state.index==0){activity.state.changed=false;}this.change(activity);if(this.editor.props.id=='layout'){api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Undo');}else if(this.editor.props.id=='styles'){api.b3repxvd.h9VSyDAP('Styles:'+' '+this.editor.config.groups[this.editor.current.group],'Undo');}}},redo:function(){if(!this.refs.redo.disabled){this.redoing=true;this.state.index++;var activity=JSON.parse(JSON.stringify(this.state.activities[this.state.index]));this.change(activity);if(this.editor.props.id=='layout'){api.b3repxvd.h9VSyDAP('Layout:'+' '+this.editor.config.screens[this.editor.current.screen],'Redo');}else if(this.editor.props.id=='styles'){api.b3repxvd.h9VSyDAP('Styles:'+' '+this.editor.config.groups[this.editor.current.group],'Redo');}}},change:function(activity){this.editor.setData(activity.data);this.editor.setState(activity.state);if(this.editor.selectItem&&activity.current&&activity.current.editing!==undefined){this.editor.selectItem(activity.current.editing,true);}},reset:function(){this.setState(this.getInitialState());}});var PaneItems=api.PaneItems=extendReactClass('PaneMixinBase',{render:function(){var items=[];for(var type in this.editor.config.items){var keyName='item_type_'+type;items.push(React.createElement(api.PaneItem,{key:this.editor.props.id+'_'+keyName,ref:keyName,type:type,parent:this,editor:this.editor}));}return React.createElement('ul',{ref:'wrapper',className:'list-unstyled list-modules mb-0'},items);}});var PaneItem=api.PaneItem=extendReactClass('PaneMixinBase',{mixins:[api.PaneMixinDraggable],getDefaultProps:function(){return{type:''};},componentWillMount:function(){api.__parent__();api.Item.loadSettingsForm(this.editor,this.props.type,this.forceUpdate.bind(this));},render:function(){var item=this.editor.config.items[this.props.type];if(typeof item.settings=='string'||item.settings['hidden-in-panel']){return null;}return React.createElement('li',{className:'draggable',draggable:'true',onDragStart:this.dragStart,onDragEnd:this.dragEnd},React.createElement('a',{ref:'element',href:'#',title:item.label,'data-type':this.props.type,'data-toggle':'tooltip','data-placement':'right'},React.createElement('i',{className:item.icon})));},initActions:function(){if(this.refs.element){if(!this.refs.element._initialized_popover){jQuery(this.refs.element).tooltip({trigger:'hover',container:'body'}).on('show.bs.tooltip',function(event){var target=event.target;var content;if(target.parentNode.classList.contains('disabled')){content=api.Text.parse('used-one-time-item').replace('%ITEM%',this.editor.config.items[this.props.type].label);}else{content=this.editor.config.items[this.props.type].label;}target.setAttribute('data-original-title',content);}.bind(this));this.refs.element._initialized_popover=true;}}var item=this.editor.config.items[this.props.type];if(item.settings&&item.settings['one-time-item']){setTimeout(function(){if(api.Item.isUsed(this.editor,this.props.type)){this.refs.element.parentNode.classList.add('disabled');}else{this.refs.element.parentNode.classList.remove('disabled');}}.bind(this),500);}},componentWillUnmount:function(){if(this.refs.element._initialized_popover){delete this.refs.element._initialized_popover;jQuery(this.refs.element).tooltip('dispose').off('show.bs.tooltip');}},handleDragStart:function(event){var item_type=event.target.getAttribute('data-type');if(event.target.parentNode.classList.contains('disabled')){return bootbox.alert(api.Text.parse('one-time-item').replace('%ITEM%',item_type.replace('-',' ')));}event.dataTransfer.setData('element',item_type);this.editor.state.dataTransfer=item_type;}});var TemplateAdmin=api.TemplateAdmin=extendReactClass('MixinBase',{getDefaultProps:function(){return{id:'sunfw-template-admin'};},getInitialState:function(){return{components:[]};},componentWillMount:function(force){api.__parent__();if(!force){api.bqZHB4bn.awxDre75=this;api.Event.add(this,'MenuAssignmentRendered',this.getLayoutPreviewLink);api.Event.add(this,'TemplateStyleChanged',this.getLayoutPreviewLink);api.Event.add(this,'MenuAssignmentSaved',this.getLayoutPreviewLink);}},initConfig:function(config){api.bqZHB4bn.bbjC4kFn=config.firstStyle;delete config.firstStyle;if(config.namespace!==undefined){api.namespace=config.namespace;delete config.namespace;}if(config[api.Text.GmTf5Hzw([108,105,99,101,110,115,101])]!==undefined){api.bqZHB4bn.GgR3PVqb=config[api.Text.GmTf5Hzw([108,105,99,101,110,115,101])];delete config[api.Text.GmTf5Hzw([108,105,99,101,110,115,101])];}if(config[api.Text.GmTf5Hzw([116,111,107,101,110])]!==undefined){api.bqZHB4bn.NV5M1C6F=config[api.Text.GmTf5Hzw([116,111,107,101,110])];delete config[api.Text.GmTf5Hzw([116,111,107,101,110])];}if(config.lang!==undefined){api.lang=config.lang;delete config.lang;}if(config.urls!==undefined){api.urls=config.urls;delete config.urls;}if(config.ga){setTimeout(api.b3repxvd.WTzGA7ab.bind(null,config.ga),100);delete config.ga;}api.__parent__(config);api.Event.trigger(this,'TemplateAdminConfigLoaded');},render:function(){return React.createElement('div',{ref:'mountedDOMNode'},this.state.components.map(component=>{var ComponentName=findObject(component.name);if(ComponentName){return React.createElement(ComponentName,{id:this.props.id+'-'+component.id,ref:component.id,cfg:component.data||null,doc:this});}}));},componentDidMount:function(){api.__parent__();api.Event.add(document,'click',function(event){var target=event.target;while(target&&target.nodeName!='A'&&target.nodeName!='BODY'){target=target.parentNode;}if(target&&target.nodeName=='A'&&['sunfw-learn-more','sunfw-get-started','sunfw-save-as-copy'].indexOf(target.id)>-1){event.preventDefault();if(target.id!='sunfw-save-as-copy'){if(this.refs.body){this.refs.body.showGetStarted(event);}}else{api.Ajax.request(target.href,function(req){if(req.responseJSON&&req.responseJSON.type=='success'){window.location.href=api.urls.root+'/administrator/index.php?option=com_templates&task=style.edit&id='+req.responseJSON.data.id;}else{bootbox.alert(req.responseJSON.data||req.responseText);}});}}}.bind(this));},componentWillUnmount:function(){api.Event.remove(this,'MenuAssignmentRendered',this.getLayoutPreviewLink);api.Event.remove(this,'TemplateStyleChanged',this.getLayoutPreviewLink);api.Event.remove(this,'MenuAssignmentSaved',this.getLayoutPreviewLink);},getLayoutPreviewLink:function(){var previewLink=null;var defaultAssignment=document.querySelector('select[name="home"]');if(defaultAssignment){if(defaultAssignment.disabled){previewLink=api.urls.root+'?suntp=1&showhint=1';}else{defaultAssignment=defaultAssignment.options[defaultAssignment.selectedIndex].value;switch(defaultAssignment){case '1':previewLink=api.urls.root+'?suntp=1&showhint=1';break;default:if(defaultAssignment!='0'){previewLink=api.urls.root+'?lang='+api.lang[defaultAssignment]+'&suntp=1&showhint=1';}break;}}}if(!previewLink&&this.refs.body.refs['menu-assignment']){var assignedMenuItems=this.refs.body.refs['menu-assignment'].getData().items;if(assignedMenuItems.length){previewLink=api.urls.root+'?Itemid='+assignedMenuItems[0]+'&suntp=1&showhint=1';}}if(!previewLink){return setTimeout(this.getLayoutPreviewLink,100);}return this.refs.header.setState({previewLink:previewLink});}});var ExtraOptions=api.ExtraOptions=extendReactClass('TemplateAdmin',{getDefaultProps:function(){return{id:'sunfw-template-admin'};},componentWillMount:function(){api.__parent__();api.bqZHB4bn.dcVyACkF=true;if(window.location.href.indexOf('option=com_content')>-1&&window.location.href.indexOf('view=article')>-1&&window.location.href.match(/&layout=(edit|modal)/)||window.location.href.indexOf('view=form')>-1&&window.location.href.indexOf('layout=edit')>-1&&window.location.href.match(/&a_id=\d+/)||document.querySelector('div[id="attrib-sunfw-options"]')){var type=document.querySelector('.sunfw_article_type'),typeOptions=document.querySelectorAll('[class*="sunfw_article_type_"]'),toggleOptions=function(){var selected=type.options[type.selectedIndex].value;for(var i=0;i<typeOptions.length;i++){var controlGroup=typeOptions[i];while(controlGroup&&controlGroup.nodeName!='BODY'){if(controlGroup.classList&&controlGroup.classList.contains('control-group')){break;}controlGroup=controlGroup.parentNode;}if(typeOptions[i].classList.contains('sunfw_article_type_'+selected)){controlGroup.classList.remove('hidden');}else{controlGroup.classList.add('hidden');}}};jQuery(type).change(toggleOptions);toggleOptions();}},initConfig:function(config){config.ga.enabled=0;api.__parent__();if(!this.cyy6yS9a){if(window.location.href.indexOf('option=com_content')>-1&&window.location.href.indexOf('view=article')>-1&&window.location.href.match(/&layout=(edit|modal)/)){this.cyy6yS9a='article-options';}else if(window.location.href.indexOf('option=com_menus')>-1&&window.location.href.indexOf('view=item')>-1&&window.location.href.match(/&layout=(edit|modal)/)){this.cyy6yS9a='menu-options';}}if(this.cyy6yS9a){if(!api.uKCTvbAY()){api.Modal.hide();}var controls=document.querySelectorAll('[name*="sunfw"],[data-name*="sunfw"]');if(controls.length){for(var i=0;i<controls.length;i++){if(api.uKCTvbAY()){controls[i].disabled=true;controls[i].classList.add('disabled');api.Event.add(controls[i].parentNode,'click',this.showAlert);}else{controls[i].disabled=false;controls[i].classList.remove('disabled');api.Event.remove(controls[i].parentNode,'click',this.showAlert);}if(controls[i].nodeName=='SELECT'){jQuery(controls[i]).trigger("liszt:updated");}}}}},render:function(){return React.createElement('div',{ref:'mountedDOMNode'});},showAlert:function(){api.w0bj7Dgp(api.Text.GmTf5Hzw([101,120,116,114,97,45])+this.cyy6yS9a);},componentDidUpdate:function(){}});function renderComponents(){if(document.readyState=='complete'||document.readyState!='loading'&&!document.documentElement.doScroll){var containers=document.querySelectorAll('[data-render]');for(var i=0;i<containers.length;i++){var ComponentName=findObject(containers[i].getAttribute('data-render'));if(ComponentName){var props={},remove=[];for(var j=0;j<containers[i].attributes.length;j++){var attribute=containers[i].attributes[j];if(attribute.name.indexOf('data-')==0){if(attribute.name!='data-render'){props[attribute.name.substr(5)]=attribute.value;}remove.push(attribute.name);}}for(var j=0;j<remove.length;j++){containers[i].removeAttribute(remove[j]);}ReactDOM.render(React.createElement(ComponentName,props),containers[i]);}}}else{setTimeout(renderComponents,100);}}renderComponents();})((y2aqGSjp=window.y2aqGSjp||{}));