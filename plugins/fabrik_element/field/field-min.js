/*! Fabrik */

function geolocateLoad(){document.body?window.fireEvent("google.geolocate.loaded"):console.log("no body")}define(["jquery","fab/element","components/com_fabrik/libs/masked_input/jquery.maskedinput"],function(n,i,e){return window.FbField=new Class({Extends:i,options:{use_input_mask:!1,input_mask_definitions:"",input_mask_autoclear:!1,geocomplete:!1,mapKey:!1},initialize:function(i,e){var t;this.setPlugin("fabrikfield"),this.parent(i,e),this.options.use_input_mask&&(""!==this.options.input_mask_definitions&&(t=JSON.parse(this.options.input_mask_definitions),n.extend(n.mask.definitions,t)),n("#"+i).mask(this.options.input_mask,{autoclear:this.options.input_mask_autoclear})),this.options.geocomplete&&(this.gcMade=!1,this.loadFn=function(){if(!1===this.gcMade){var t=this;n("#"+this.element.id).geocomplete({}).bind("geocode:result",function(i,e){Fabrik.fireEvent("fabrik.element.field.geocode",[t,e])}),this.gcMade=!0}}.bind(this),window.addEvent("google.geolocate.loaded",this.loadFn),Fabrik.loadGoogleMap(this.options.mapKey,"geolocateLoad"))},select:function(){this.getElement()&&this.getElement().select()},focus:function(){this.getElement()&&this.getElement().focus(),this.parent()},cloned:function(i){var e=this.getElement();if(this.options.use_input_mask&&e){if(""!==this.options.input_mask_definitions){var t=JSON.parse(this.options.input_mask_definitions);$H(t).each(function(i,e){n.mask.definitions[e]=i})}n("#"+e.id).mask(this.options.input_mask,{autoclear:this.options.input_mask_autoclear})}if(this.options.geocomplete&&e){var o=this;n("#"+this.element.id).geocomplete().bind("geocode:result",function(i,e){Fabrik.fireEvent("fabrik.element.field.geocode",[o,e])})}this.parent(i)}}),window.FbField});